define(["backbone","jquery","underscore","shared/views/base","text!./simulator.html"],function(e,t,n,r,i){return r.extend({initialize:function(e){this.database=[{key:"Aquarium",value:500},{key:"Coffee maker",value:200},{key:"Clothes washer",value:500},{key:"Clothes dryer",value:2500},{key:"Dishwasher",value:1250},{key:"Hair dryer",value:150},{key:"Microwave oven",value:200},{key:"Toaster",value:300},{key:"Vacuum cleaner",value:240}],this.base=500,this.max=3e3},render:function(){return this.$el.html(i),this.createTable(),this.renderGauge(),this},events:{"click td":"onCellClicked"},createTable:function(){var e=t("<table/>"),r=t("<tr/>");e.append(r);var i=0;n.each(this.database,function(n){i>=3&&(r=t("<tr/>"),e.append(r),i=0),$cell=t("<td/>"),$cell.html(n.key),$cell.attr("data-value",n.value),r.append($cell),i+=1}),this.$(".controls").append(e)},onCellClicked:function(e){t(e.currentTarget).toggleClass("active"),this.renderGauge()},renderGauge:n.debounce(function(){var e=500;n.map(this.$(".active"),function(n){e+=parseInt(t(n).attr("data-value"),10)}),this.graphOptions={0:{color:"g",label:""},1e3:{color:"#FFCC00",label:"low"},2e3:{color:"#FFB300",label:"med."},3e3:{color:"#FF9900",label:"high"}};var r=this;this.gauge?this.gauge.value(e):this.gauge=this.$(".gauge").dxLinearGauge({rangeContainer:{ranges:[{startValue:0,endValue:1e3,color:"#FFCC00"},{startValue:1e3,endValue:2e3,color:"#FFB300"},{startValue:2e3,endValue:3e3,color:"#FF9900"}]},scale:{startValue:0,endValue:3e3,majorTick:{tickInterval:1e3},label:{customizeText:function(e){return r.graphOptions[e.valueText].label}}},value:e,title:{text:"Estimated consumption",font:{size:12}}}).dxLinearGauge("instance")},100)})});