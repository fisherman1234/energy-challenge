define(["backbone","jquery","underscore","shared/collections/modelsCache","shared/views/base","./../graphs/greenButtonConsumption","text!./history.html","text!./goalData.html"],function(e,t,n,r,i,s,o,u){return i.extend({initialize:function(e){this.consumption=new s,this.consumption.on("rendered",this.postRender,this)},events:{"click .section":"onSectionClicked"},render:function(){this.$el.html(o),this.$(".legend").hide();var e={};return e.data={last_day:moment().dayOfYear(),duration:6},this.consumption.setElement(this.$("#full-history")).render(e),this},postRender:function(){this.$(".legend").show();var e={stars:this.consumption.scores.stars.length,starsTotal:r.home.get("monthly_target").stars,flags:this.consumption.scores.flags.length,flagsTotal:-r.home.get("monthly_target").flags};this.$("#goal-data").html(n.template(u,e))},onSectionClicked:function(n){var r=t(n.currentTarget).attr("data-target");r&&e.history.navigate(r,!0)}})});