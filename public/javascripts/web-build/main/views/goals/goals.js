define(["jquery","backbone","underscore","shared/views/base","shared/collections/modelsCache","./../graphs/scores","text!./goals.html"],function(e,t,n,r,i,s,o){return r.extend({initialize:function(e){this.scores=new s},render:function(){this.$el.html(o);var e=[i.home.get("scores")[1],i.home.get("scores")[2],i.home.get("scores")[3],i.home.get("scores")[4],i.home.get("scores")[5],i.home.get("scores")[6]],t=[{width:1,value:i.home.get("monthly_target").flags,color:"#edbd00",dashStyle:"dash"},{width:1,value:i.home.get("monthly_target").stars,color:"#779241",dashStyle:"dash"}];return this.graphOpt={data:e,goalsTarget:t},this.scores.setElement(this.$("#score-history")).render(this.graphOpt),window.a=this.scores,this.$(".flag-display").html(-i.home.get("monthly_target").flags),this.$(".star-display").html(i.home.get("monthly_target").stars),this.$("#flag-value").val(-i.home.get("monthly_target").flags),this.$("#star-value").val(i.home.get("monthly_target").stars),this},events:{"change #flag-value":"onFlagValueChanged","change #star-value":"onStarValueChanged","click #save":"onSave"},onFlagValueChanged:function(t){var n=e(t.currentTarget).val();n=parseInt(n,10),this.graphOpt.goalsTarget[0].value=-n,this.scores.render(this.graphOpt),this.$(".flag-display").html(n)},onStarValueChanged:function(t){var n=e(t.currentTarget).val();n=parseInt(n,10),this.graphOpt.goalsTarget[1].value=n,this.scores.render(this.graphOpt),this.$(".star-display").html(n)},onSave:function(){i.home.set("monthly_target",{flags:-parseInt(this.$("#flag-value").val(),10),stars:parseInt(this.$("#star-value").val())}).save(),t.history.navigate("/",!0)}})});