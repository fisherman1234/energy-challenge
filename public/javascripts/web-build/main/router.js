define(["jquery","underscore","backbone","shared/collections/modelsCache","views/home/home","views/login/login","views/home/breakdown","views/home/history","views/navigation/navigation","views/tutorials/tutorials","views/goals/goals","views/advice/advice","views/home/simulator"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){return n.Router.extend({routes:{"":"root",home:"home",tutorial:"tutorial",breakdown:"realTimeBreakdown",history:"history",goals:"goals",advice:"advice",simulator:"simulator","*catchAll":"notFound"},initialize:function(e){this.$leftPane=e.find("#left-pane-inner"),this.$navBar=e.find("#navigation"),this.views={home:{view:new i,rendered:!1},breakdown:{view:new o,rendered:!1},history:{view:new u,rendered:!1},navigation:{view:new a,rendered:!1},login:{view:new s,rendered:!1},tutorial:{view:new f,rendered:!1},goals:{view:new l,rendered:!1},advice:{view:new c,rendered:!1},simulator:{view:new h,rendered:!1}}},renderView:function(t,n,r,i){t.find("#pane-contents").detach();if(!n)return;var s=this.views[n];if(!s)throw new Error("View not found "+n);window.scrollTo(0);if(i||!s.rendered){var o=e('<div id="pane-contents" class="height-100 paneContents-'+n+'"></div>');s.view.setElement(o).render(r)}t.append(s.view.$el),s.rendered=!0,this.views[n]=s},home:function(){if(!localStorage.getItem("tutorialCompleted"))return n.history.navigate("/tutorial",!0);this.renderView(this.$leftPane,"home"),this.renderView(this.$navBar,"navigation",{title:"Home",hideBack:!0},!0),n.history.navigate("/"),this.$navBar.show()},root:function(){this.isLoggedIn?this.home():(this.isLoggedIn=!0,this.login())},login:function(){this.renderView(this.$leftPane,"login",{},!0),this.$navBar.hide()},tutorial:function(){this.renderView(this.$leftPane,"tutorial"),this.$navBar.hide()},goals:function(){if(!r.home.id)return n.history.navigate("/",!0);this.renderView(this.$leftPane,"goals"),this.renderView(this.$navBar,"navigation",{title:"Goals"},!0)},notFound:function(){this.root()},advice:function(){this.renderView(this.$leftPane,"advice"),this.renderView(this.$navBar,"navigation",{title:"Tips"},!0)},simulator:function(){if(!r.home.id)return n.history.navigate("/",!0);this.renderView(this.$leftPane,"simulator"),this.renderView(this.$navBar,"navigation",{title:"Energy estimate"},!0)},realTimeBreakdown:function(){if(!r.home.id)return n.history.navigate("/",!0);this.renderView(this.$leftPane,"breakdown"),this.renderView(this.$navBar,"navigation",{title:"Real Time"},!0)},history:function(){if(!r.home.id)return n.history.navigate("/",!0);this.renderView(this.$leftPane,"history"),this.renderView(this.$navBar,"navigation",{title:"History"},!0)}})});