define(["jquery","underscore","backbone","views/home/home","views/home/breakdown","views/home/history","views/navigation/navigation"],function(e,t,n,r,i,s,o){return n.Router.extend({routes:{"":"start",breakdown:"realTimeBreakdown",history:"history","*catchAll":"notFound"},initialize:function(e){this.$leftPane=e.find("#left-pane-inner"),this.$navBar=e.find("#navigation"),this.views={home:{view:new r,rendered:!1},breakdown:{view:new i,rendered:!1},history:{view:new s,rendered:!1},navigation:{view:new o,rendered:!1}}},renderView:function(n,r,i,s){n.find("#pane-contents").detach();if(!r)return;var o=this.views[r];if(!o)throw new Error("View not found "+r);t.isMobile()&&window.scrollTo(0,1);if(s||!o.rendered){var u=e('<div id="pane-contents" class="paneContents-'+r+'"></div>');o.view.setElement(u).render(i)}n.append(o.view.$el),o.rendered=!0,this.views[r]=o},start:function(){this.renderView(this.$leftPane,"home",{},!0),this.renderView(this.$navBar,"navigation",{title:"Home",hideBack:!0},!0)},notFound:function(){this.start()},realTimeBreakdown:function(){this.renderView(this.$leftPane,"breakdown",{},!0),this.renderView(this.$navBar,"navigation",{title:"Real Time"},!0)},history:function(){this.renderView(this.$leftPane,"history",{},!0),this.renderView(this.$navBar,"navigation",{title:"History"},!0)}})});