(function(){var DEBUG=!0;(function(undefined){var window=this||(0,eval)("this"),document=window.document,navigator=window.navigator,jQuery=window.jQuery,JSON=window.JSON;(function(e){if(typeof require=="function"&&typeof exports=="object"&&typeof module=="object"){var t=module.exports||exports;e(t)}else typeof define=="function"&&define.amd?define(["exports"],e):e(window.ko={})})(function(e){function t(e,t){var n=e===null||typeof e in o;return n?e===t:!1}function n(e){var t=this;return e&&s.utils.objectForEach(e,function(e,n){var r=s.extenders[e];typeof r=="function"&&(t=r(t,n)||t)}),t}function r(e){s.bindingHandlers[e]={init:function(t,n,r,i,o){var u=function(){var t={};return t[e]=n(),t};return s.bindingHandlers.event.init.call(this,t,u,r,i,o)}}}function i(e,t,n,r){s.bindingHandlers[e]={init:function(e){return s.utils.domData.set(e,v,{}),{controlsDescendantBindings:!0}},update:function(e,i,o,u,a){var f=s.utils.domData.get(e,v),l=s.utils.unwrapObservable(i()),c=!n!=!l,h=!f.savedNodes,p=h||t||c!==f.didDisplayOnLastUpdate;p&&(h&&(f.savedNodes=s.utils.cloneNodes(s.virtualElements.childNodes(e),!0)),c?(h||s.virtualElements.setDomNodeChildren(e,s.utils.cloneNodes(f.savedNodes)),s.applyBindingsToDescendants(r?r(a,l):a,e)):s.virtualElements.emptyNode(e),f.didDisplayOnLastUpdate=c)}},s.expressionRewriting.bindingRewriteValidators[e]=!1,s.virtualElements.allowedBindings[e]=!0}var s=typeof e!="undefined"?e:{};s.exportSymbol=function(e,t){var n=e.split("."),r=s;for(var i=0;i<n.length-1;i++)r=r[n[i]];r[n[n.length-1]]=t},s.exportProperty=function(e,t,n){e[t]=n},s.version="3.0.0",s.exportSymbol("version",s.version),s.utils=function(){function e(e,t){if(s.utils.tagNameLower(e)!=="input"||!e.type)return!1;if(t.toLowerCase()!="click")return!1;var n=e.type;return n=="checkbox"||n=="radio"}var t=function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])},n={},r={},i=navigator&&/Firefox\/2/i.test(navigator.userAgent)?"KeyboardEvent":"UIEvents";n[i]=["keyup","keydown","keypress"],n.MouseEvents=["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave"],t(n,function(e,t){if(t.length)for(var n=0,i=t.length;n<i;n++)r[t[n]]=e});var o={propertychange:!0},u=document&&function(){var e=3,t=document.createElement("div"),n=t.getElementsByTagName("i");while(t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",n[0]);return e>4?e:undefined}(),a=u===6,f=u===7;return{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n])},arrayIndexOf:function(e,t){if(typeof Array.prototype.indexOf=="function")return Array.prototype.indexOf.call(e,t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},arrayFirst:function(e,t,n){for(var r=0,i=e.length;r<i;r++)if(t.call(n,e[r]))return e[r];return null},arrayRemoveItem:function(e,t){var n=s.utils.arrayIndexOf(e,t);n>=0&&e.splice(n,1)},arrayGetDistinctValues:function(e){e=e||[];var t=[];for(var n=0,r=e.length;n<r;n++)s.utils.arrayIndexOf(t,e[n])<0&&t.push(e[n]);return t},arrayMap:function(e,t){e=e||[];var n=[];for(var r=0,i=e.length;r<i;r++)n.push(t(e[r]));return n},arrayFilter:function(e,t){e=e||[];var n=[];for(var r=0,i=e.length;r<i;r++)t(e[r])&&n.push(e[r]);return n},arrayPushAll:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,r=t.length;n<r;n++)e.push(t[n]);return e},addOrRemoveItem:function(e,t,n){var r=s.utils.arrayIndexOf(s.utils.peekObservable(e),t);r<0?n&&e.push(t):n||e.splice(r,1)},extend:function(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},objectForEach:t,objectMap:function(e,t){if(!e)return e;var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r],r,e));return n},emptyDomNode:function(e){while(e.firstChild)s.removeNode(e.firstChild)},moveCleanedNodesToContainerElement:function(e){var t=s.utils.makeArray(e),n=document.createElement("div");for(var r=0,i=t.length;r<i;r++)n.appendChild(s.cleanNode(t[r]));return n},cloneNodes:function(e,t){for(var n=0,r=e.length,i=[];n<r;n++){var o=e[n].cloneNode(!0);i.push(t?s.cleanNode(o):o)}return i},setDomNodeChildren:function(e,t){s.utils.emptyDomNode(e);if(t)for(var n=0,r=t.length;n<r;n++)e.appendChild(t[n])},replaceDomNodes:function(e,t){var n=e.nodeType?[e]:e;if(n.length>0){var r=n[0],i=r.parentNode;for(var o=0,u=t.length;o<u;o++)i.insertBefore(t[o],r);for(var o=0,u=n.length;o<u;o++)s.removeNode(n[o])}},fixUpContinuousNodeArray:function(e,t){if(e.length){t=t.nodeType===8&&t.parentNode||t;while(e.length&&e[0].parentNode!==t)e.splice(0,1);if(e.length>1){var n=e[0],r=e[e.length-1];e.length=0;while(n!==r){e.push(n),n=n.nextSibling;if(!n)return}e.push(r)}}return e},setOptionNodeSelectionState:function(e,t){u<7?e.setAttribute("selected",t):e.selected=t},stringTrim:function(e){return e===null||e===undefined?"":e.trim?e.trim():e.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},stringTokenize:function(e,t){var n=[],r=(e||"").split(t);for(var i=0,o=r.length;i<o;i++){var u=s.utils.stringTrim(r[i]);u!==""&&n.push(u)}return n},stringStartsWith:function(e,t){return e=e||"",t.length>e.length?!1:e.substring(0,t.length)===t},domNodeIsContainedBy:function(e,t){if(e===t)return!0;if(e.nodeType===11)return!1;if(t.contains)return t.contains(e.nodeType===3?e.parentNode:e);if(t.compareDocumentPosition)return(t.compareDocumentPosition(e)&16)==16;while(e&&e!=t)e=e.parentNode;return!!e},domNodeIsAttachedToDocument:function(e){return s.utils.domNodeIsContainedBy(e,e.ownerDocument.documentElement)},anyDomNodeIsAttachedToDocument:function(e){return!!s.utils.arrayFirst(e,s.utils.domNodeIsAttachedToDocument)},tagNameLower:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},registerEventHandler:function(t,n,r){var i=u&&o[n];if(!i&&typeof jQuery!="undefined"){if(e(t,n)){var a=r;r=function(e,t){var n=this.checked;t&&(this.checked=t.checkedStateBeforeEvent!==!0),a.call(this,e),this.checked=n}}jQuery(t).bind(n,r)}else if(!i&&typeof t.addEventListener=="function")t.addEventListener(n,r,!1);else{if(typeof t.attachEvent=="undefined")throw new Error("Browser doesn't support addEventListener or attachEvent");var f=function(e){r.call(t,e)},l="on"+n;t.attachEvent(l,f),s.utils.domNodeDisposal.addDisposeCallback(t,function(){t.detachEvent(l,f)})}},triggerEvent:function(t,n){if(!t||!t.nodeType)throw new Error("element must be a DOM node when calling triggerEvent");if(typeof jQuery!="undefined"){var i=[];e(t,n)&&i.push({checkedStateBeforeEvent:t.checked}),jQuery(t).trigger(n,i)}else if(typeof document.createEvent=="function"){if(typeof t.dispatchEvent!="function")throw new Error("The supplied element doesn't support dispatchEvent");var s=r[n]||"HTMLEvents",o=document.createEvent(s);o.initEvent(n,!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,t),t.dispatchEvent(o)}else{if(typeof t.fireEvent=="undefined")throw new Error("Browser doesn't support triggering events");e(t,n)&&(t.checked=t.checked!==!0),t.fireEvent("on"+n)}},unwrapObservable:function(e){return s.isObservable(e)?e():e},peekObservable:function(e){return s.isObservable(e)?e.peek():e},toggleDomNodeCssClass:function(e,t,n){if(t){var r=/\S+/g,i=e.className.match(r)||[];s.utils.arrayForEach(t.match(r),function(e){s.utils.addOrRemoveItem(i,e,n)}),e.className=i.join(" ")}},setTextContent:function(e,t){var n=s.utils.unwrapObservable(t);if(n===null||n===undefined)n="";var r=s.virtualElements.firstChild(e);!r||r.nodeType!=3||s.virtualElements.nextSibling(r)?s.virtualElements.setDomNodeChildren(e,[document.createTextNode(n)]):r.data=n,s.utils.forceRefresh(e)},setElementName:function(e,t){e.name=t;if(u<=7)try{e.mergeAttributes(document.createElement("<input name='"+e.name+"'/>"),!1)}catch(n){}},forceRefresh:function(e){if(u>=9){var t=e.nodeType==1?e:e.parentNode;t.style&&(t.style.zoom=t.style.zoom)}},ensureSelectElementIsRenderedCorrectly:function(e){if(u){var t=e.style.width;e.style.width=0,e.style.width=t}},range:function(e,t){e=s.utils.unwrapObservable(e),t=s.utils.unwrapObservable(t);var n=[];for(var r=e;r<=t;r++)n.push(r);return n},makeArray:function(e){var t=[];for(var n=0,r=e.length;n<r;n++)t.push(e[n]);return t},isIe6:a,isIe7:f,ieVersion:u,getFormFields:function(e,t){var n=s.utils.makeArray(e.getElementsByTagName("input")).concat(s.utils.makeArray(e.getElementsByTagName("textarea"))),r=typeof t=="string"?function(e){return e.name===t}:function(e){return t.test(e.name)},i=[];for(var o=n.length-1;o>=0;o--)r(n[o])&&i.push(n[o]);return i},parseJson:function(e){if(typeof e=="string"){e=s.utils.stringTrim(e);if(e)return JSON&&JSON.parse?JSON.parse(e):(new Function("return "+e))()}return null},stringifyJson:function(e,t,n){if(!JSON||!JSON.stringify)throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return JSON.stringify(s.utils.unwrapObservable(e),t,n)},postJson:function(e,n,r){r=r||{};var i=r.params||{},o=r.includeFields||this.fieldsIncludedWithJsonPost,u=e;if(typeof e=="object"&&s.utils.tagNameLower(e)==="form"){var a=e;u=a.action;for(var f=o.length-1;f>=0;f--){var l=s.utils.getFormFields(a,o[f]);for(var c=l.length-1;c>=0;c--)i[l[c].name]=l[c].value}}n=s.utils.unwrapObservable(n);var h=document.createElement("form");h.style.display="none",h.action=u,h.method="post";for(var p in n){var d=document.createElement("input");d.name=p,d.value=s.utils.stringifyJson(s.utils.unwrapObservable(n[p])),h.appendChild(d)}t(i,function(e,t){var n=document.createElement("input");n.name=e,n.value=t,h.appendChild(n)}),document.body.appendChild(h),r.submitter?r.submitter(h):h.submit(),setTimeout(function(){h.parentNode.removeChild(h)},0)}}}(),s.exportSymbol("utils",s.utils),s.exportSymbol("utils.arrayForEach",s.utils.arrayForEach),s.exportSymbol("utils.arrayFirst",s.utils.arrayFirst),s.exportSymbol("utils.arrayFilter",s.utils.arrayFilter),s.exportSymbol("utils.arrayGetDistinctValues",s.utils.arrayGetDistinctValues),s.exportSymbol("utils.arrayIndexOf",s.utils.arrayIndexOf),s.exportSymbol("utils.arrayMap",s.utils.arrayMap),s.exportSymbol("utils.arrayPushAll",s.utils.arrayPushAll),s.exportSymbol("utils.arrayRemoveItem",s.utils.arrayRemoveItem),s.exportSymbol("utils.extend",s.utils.extend),s.exportSymbol("utils.fieldsIncludedWithJsonPost",s.utils.fieldsIncludedWithJsonPost),s.exportSymbol("utils.getFormFields",s.utils.getFormFields),s.exportSymbol("utils.peekObservable",s.utils.peekObservable),s.exportSymbol("utils.postJson",s.utils.postJson),s.exportSymbol("utils.parseJson",s.utils.parseJson),s.exportSymbol("utils.registerEventHandler",s.utils.registerEventHandler),s.exportSymbol("utils.stringifyJson",s.utils.stringifyJson),s.exportSymbol("utils.range",s.utils.range),s.exportSymbol("utils.toggleDomNodeCssClass",s.utils.toggleDomNodeCssClass),s.exportSymbol("utils.triggerEvent",s.utils.triggerEvent),s.exportSymbol("utils.unwrapObservable",s.utils.unwrapObservable),s.exportSymbol("utils.objectForEach",s.utils.objectForEach),s.exportSymbol("utils.addOrRemoveItem",s.utils.addOrRemoveItem),s.exportSymbol("unwrap",s.utils.unwrapObservable),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice.call(arguments),e=n.shift();return function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))}}),s.utils.domData=new function(){function e(e,i){var s=e[n],o=s&&s!=="null"&&r[s];if(!o){if(!i)return undefined;s=e[n]="ko"+t++,r[s]={}}return r[s]}var t=0,n="__ko__"+(new Date).getTime(),r={};return{get:function(t,n){var r=e(t,!1);return r===undefined?undefined:r[n]},set:function(t,n,r){if(r===undefined&&e(t,!1)===undefined)return;var i=e(t,!0);i[n]=r},clear:function(e){var t=e[n];return t?(delete r[t],e[n]=null,!0):!1},nextKey:function(){return t++ +n}}},s.exportSymbol("utils.domData",s.utils.domData),s.exportSymbol("utils.domData.clear",s.utils.domData.clear),s.utils.domNodeDisposal=new function(){function e(e,t){var n=s.utils.domData.get(e,i);return n===undefined&&t&&(n=[],s.utils.domData.set(e,i,n)),n}function t(e){s.utils.domData.set(e,i,undefined)}function n(t){var n=e(t,!1);if(n){n=n.slice(0);for(var i=0;i<n.length;i++)n[i](t)}s.utils.domData.clear(t),typeof jQuery=="function"&&typeof jQuery["cleanData"]=="function"&&jQuery.cleanData([t]),u[t.nodeType]&&r(t)}function r(e){var t,r=e.firstChild;while(t=r)r=t.nextSibling,t.nodeType===8&&n(t)}var i=s.utils.domData.nextKey(),o={1:!0,8:!0,9:!0},u={1:!0,9:!0};return{addDisposeCallback:function(t,n){if(typeof n!="function")throw new Error("Callback must be a function");e(t,!0).push(n)},removeDisposeCallback:function(n,r){var i=e(n,!1);i&&(s.utils.arrayRemoveItem(i,r),i.length==0&&t(n))},cleanNode:function(e){if(o[e.nodeType]){n(e);if(u[e.nodeType]){var t=[];s.utils.arrayPushAll(t,e.getElementsByTagName("*"));for(var r=0,i=t.length;r<i;r++)n(t[r])}}return e},removeNode:function(e){s.cleanNode(e),e.parentNode&&e.parentNode.removeChild(e)}}},s.cleanNode=s.utils.domNodeDisposal.cleanNode,s.removeNode=s.utils.domNodeDisposal.removeNode,s.exportSymbol("cleanNode",s.cleanNode),s.exportSymbol("removeNode",s.removeNode),s.exportSymbol("utils.domNodeDisposal",s.utils.domNodeDisposal),s.exportSymbol("utils.domNodeDisposal.addDisposeCallback",s.utils.domNodeDisposal.addDisposeCallback),s.exportSymbol("utils.domNodeDisposal.removeDisposeCallback",s.utils.domNodeDisposal.removeDisposeCallback),function(){function e(e){var t=s.utils.stringTrim(e).toLowerCase(),n=document.createElement("div"),r=t.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!t.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!t.indexOf("<td")||!t.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],i="ignored<div>"+r[1]+e+r[2]+"</div>";typeof window["innerShiv"]=="function"?n.appendChild(window.innerShiv(i)):n.innerHTML=i;while(r[0]--)n=n.lastChild;return s.utils.makeArray(n.lastChild.childNodes)}function t(e){if(jQuery.parseHTML)return jQuery.parseHTML(e)||[];var t=jQuery.clean([e]);if(t&&t[0]){var n=t[0];while(n.parentNode&&n.parentNode.nodeType!==11)n=n.parentNode;n.parentNode&&n.parentNode.removeChild(n)}return t}var n=/^(\s*)<!--(.*?)-->/;s.utils.parseHtmlFragment=function(n){return typeof jQuery!="undefined"?t(n):e(n)},s.utils.setHtml=function(e,t){s.utils.emptyDomNode(e),t=s.utils.unwrapObservable(t);if(t!==null&&t!==undefined){typeof t!="string"&&(t=t.toString());if(typeof jQuery!="undefined")jQuery(e).html(t);else{var n=s.utils.parseHtmlFragment(t);for(var r=0;r<n.length;r++)e.appendChild(n[r])}}}}(),s.exportSymbol("utils.parseHtmlFragment",s.utils.parseHtmlFragment),s.exportSymbol("utils.setHtml",s.utils.setHtml),s.memoization=function(){function e(){return((1+Math.random())*4294967296|0).toString(16).substring(1)}function t(){return e()+e()}function n(e,t){if(!e)return;if(e.nodeType==8){var r=s.memoization.parseMemoText(e.nodeValue);r!=null&&t.push({domNode:e,memoId:r})}else if(e.nodeType==1)for(var i=0,o=e.childNodes,u=o.length;i<u;i++)n(o[i],t)}var r={};return{memoize:function(e){if(typeof e!="function")throw new Error("You can only pass a function to ko.memoization.memoize()");var n=t();return r[n]=e,"<!--[ko_memo:"+n+"]-->"},unmemoize:function(e,t){var n=r[e];if(n===undefined)throw new Error("Couldn't find any memo with ID "+e+". Perhaps it's already been unmemoized.");try{return n.apply(null,t||[]),!0}finally{delete r[e]}},unmemoizeDomNodeAndDescendants:function(e,t){var r=[];n(e,r);for(var i=0,o=r.length;i<o;i++){var u=r[i].domNode,a=[u];t&&s.utils.arrayPushAll(a,t),s.memoization.unmemoize(r[i].memoId,a),u.nodeValue="",u.parentNode&&u.parentNode.removeChild(u)}},parseMemoText:function(e){var t=e.match(/^\[ko_memo\:(.*?)\]$/);return t?t[1]:null}}}(),s.exportSymbol("memoization",s.memoization),s.exportSymbol("memoization.memoize",s.memoization.memoize),s.exportSymbol("memoization.unmemoize",s.memoization.unmemoize),s.exportSymbol("memoization.parseMemoText",s.memoization.parseMemoText),s.exportSymbol("memoization.unmemoizeDomNodeAndDescendants",s.memoization.unmemoizeDomNodeAndDescendants),s.extenders={throttle:function(e,t){e.throttleEvaluation=t;var n=null;return s.dependentObservable({read:e,write:function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}})},notify:function(e,n){e.equalityComparer=n=="always"?null:t}};var o={"undefined":1,"boolean":1,number:1,string:1};s.exportSymbol("extenders",s.extenders),s.subscription=function(e,t,n){this.target=e,this.callback=t,this.disposeCallback=n,s.exportProperty(this,"dispose",this.dispose)},s.subscription.prototype.dispose=function(){this.isDisposed=!0,this.disposeCallback()},s.subscribable=function(){this._subscriptions={},s.utils.extend(this,s.subscribable.fn),s.exportProperty(this,"subscribe",this.subscribe),s.exportProperty(this,"extend",this.extend),s.exportProperty(this,"getSubscriptionsCount",this.getSubscriptionsCount)};var u="change";s.subscribable.fn={subscribe:function(e,t,n){n=n||u;var r=t?e.bind(t):e,i=new s.subscription(this,r,function(){s.utils.arrayRemoveItem(this._subscriptions[n],i)}.bind(this));return this._subscriptions[n]||(this._subscriptions[n]=[]),this._subscriptions[n].push(i),i},notifySubscribers:function(e,t){t=t||u;if(this.hasSubscriptionsForEvent(t))try{s.dependencyDetection.begin();for(var n=this._subscriptions[t].slice(0),r=0,i;i=n[r];++r)i&&i.isDisposed!==!0&&i.callback(e)}finally{s.dependencyDetection.end()}},hasSubscriptionsForEvent:function(e){return this._subscriptions[e]&&this._subscriptions[e].length},getSubscriptionsCount:function(){var e=0;return s.utils.objectForEach(this._subscriptions,function(t,n){e+=n.length}),e},extend:n},s.isSubscribable=function(e){return e!=null&&typeof e.subscribe=="function"&&typeof e["notifySubscribers"]=="function"},s.exportSymbol("subscribable",s.subscribable),s.exportSymbol("isSubscribable",s.isSubscribable),s.dependencyDetection=function(){var e=[];return{begin:function(t){e.push(t&&{callback:t,distinctDependencies:[]})},end:function(){e.pop()},registerDependency:function(t){if(!s.isSubscribable(t))throw new Error("Only subscribable things can act as dependencies");if(e.length>0){var n=e[e.length-1];if(!n||s.utils.arrayIndexOf(n.distinctDependencies,t)>=0)return;n.distinctDependencies.push(t),n.callback(t)}},ignore:function(t,n,r){try{return e.push(null),t.apply(n,r||[])}finally{e.pop()}}}}(),s.observable=function(e){function t(){if(arguments.length>0){if(!t.equalityComparer||!t.equalityComparer(n,arguments[0]))t.valueWillMutate(),n=arguments[0],DEBUG&&(t._latestValue=n),t.valueHasMutated();return this}return s.dependencyDetection.registerDependency(t),n}var n=e;return DEBUG&&(t._latestValue=n),s.subscribable.call(t),t.peek=function(){return n},t.valueHasMutated=function(){t.notifySubscribers(n)},t.valueWillMutate=function(){t.notifySubscribers(n,"beforeChange")},s.utils.extend(t,s.observable.fn),s.exportProperty(t,"peek",t.peek),s.exportProperty(t,"valueHasMutated",t.valueHasMutated),s.exportProperty(t,"valueWillMutate",t.valueWillMutate),t},s.observable.fn={equalityComparer:t};var a=s.observable.protoProperty="__ko_proto__";s.observable.fn[a]=s.observable,s.hasPrototype=function(e,t){return e===null||e===undefined||e[a]===undefined?!1:e[a]===t?!0:s.hasPrototype(e[a],t)},s.isObservable=function(e){return s.hasPrototype(e,s.observable)},s.isWriteableObservable=function(e){return typeof e=="function"&&e[a]===s.observable?!0:typeof e=="function"&&e[a]===s.dependentObservable&&e.hasWriteFunction?!0:!1},s.exportSymbol("observable",s.observable),s.exportSymbol("isObservable",s.isObservable),s.exportSymbol("isWriteableObservable",s.isWriteableObservable),s.observableArray=function(e){e=e||[];if(typeof e=="object"&&"length"in e){var t=s.observable(e);return s.utils.extend(t,s.observableArray.fn),t.extend({trackArrayChanges:!0})}throw new Error("The argument passed when initializing an observable array must be an array, or null, or undefined.")},s.observableArray.fn={remove:function(e){var t=this.peek(),n=[],r=typeof e=="function"&&!s.isObservable(e)?e:function(t){return t===e};for(var i=0;i<t.length;i++){var o=t[i];r(o)&&(n.length===0&&this.valueWillMutate(),n.push(o),t.splice(i,1),i--)}return n.length&&this.valueHasMutated(),n},removeAll:function(e){if(e===undefined){var t=this.peek(),n=t.slice(0);return this.valueWillMutate(),t.splice(0,t.length),this.valueHasMutated(),n}return e?this.remove(function(t){return s.utils.arrayIndexOf(e,t)>=0}):[]},destroy:function(e){var t=this.peek(),n=typeof e=="function"&&!s.isObservable(e)?e:function(t){return t===e};this.valueWillMutate();for(var r=t.length-1;r>=0;r--){var i=t[r];n(i)&&(t[r]._destroy=!0)}this.valueHasMutated()},destroyAll:function(e){return e===undefined?this.destroy(function(){return!0}):e?this.destroy(function(t){return s.utils.arrayIndexOf(e,t)>=0}):[]},indexOf:function(e){var t=this();return s.utils.arrayIndexOf(t,e)},replace:function(e,t){var n=this.indexOf(e);n>=0&&(this.valueWillMutate(),this.peek()[n]=t,this.valueHasMutated())}},s.utils.arrayForEach(["pop","push","reverse","shift","sort","splice","unshift"],function(e){s.observableArray.fn[e]=function(){var t=this.peek();this.valueWillMutate(),this.cacheDiffForKnownOperation(t,e,arguments);var n=t[e].apply(t,arguments);return this.valueHasMutated(),n}}),s.utils.arrayForEach(["slice"],function(e){s.observableArray.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}}),s.exportSymbol("observableArray",s.observableArray);var f="arrayChange";s.extenders.trackArrayChanges=function(e){function t(){if(r)return;r=!0;var t=e.notifySubscribers;e.notifySubscribers=function(e,n){return(!n||n===u)&&++o,t.apply(this,arguments)};var s=[].concat(e.peek()||[]);i=null,e.subscribe(function(t){t=[].concat(t||[]);if(e.hasSubscriptionsForEvent(f)){var r=n(s,t);r.length&&e.notifySubscribers(r,f)}s=t,i=null,o=0})}function n(e,t){if(!i||o>1)i=s.utils.compareArrays(e,t,{sparse:!0});return i}if(e.cacheDiffForKnownOperation)return;var r=!1,i=null,o=0,a=e.subscribe;e.subscribe=e.subscribe=function(e,n,r){return r===f&&t(),a.apply(this,arguments)},e.cacheDiffForKnownOperation=function(e,t,n){function s(e,t,n){u.push({status:e,value:t,index:n})}if(!r||o)return;var u=[],a=e.length,f=n.length,l=0;switch(t){case"push":l=a;case"unshift":for(var c=0;c<f;c++)s("added",n[c],l+c);break;case"pop":l=a-1;case"shift":a&&s("deleted",e[l],l);break;case"splice":var h=Math.min(Math.max(0,n[0]<0?a+n[0]:n[0]),a),p=f===1?a:Math.min(h+(n[1]||0),a),d=h+f-2,v=Math.max(p,d);for(var c=h,m=2;c<v;++c,++m)c<p&&s("deleted",e[c],c),c<d&&s("added",n[m],c);break;default:return}i=u}},s.dependentObservable=function(e,t,n){function r(e){E.push(e.subscribe(o))}function i(){s.utils.arrayForEach(E,function(e){e.dispose()}),E=[]}function o(){var e=a.throttleEvaluation;e&&e>=0?(clearTimeout(S),S=setTimeout(u,e)):u()}function u(){if(p)return;if(b&&b()){if(!d){w(),h=!0;return}}else d=!1;p=!0;try{var e=s.utils.arrayMap(E,function(e){return e.target});s.dependencyDetection.begin(function(t){var n;(n=s.utils.arrayIndexOf(e,t))>=0?e[n]=undefined:r(t)});var n=t?v.call(t):v();for(var i=e.length-1;i>=0;i--)e[i]&&E.splice(i,1)[0].dispose();h=!0;if(!a.equalityComparer||!a.equalityComparer(c,n))a.notifySubscribers(c,"beforeChange"),c=n,DEBUG&&(a._latestValue=c),a.notifySubscribers(c)}finally{s.dependencyDetection.end(),p=!1}E.length||w()}function a(){if(arguments.length>0){if(typeof m!="function")throw new Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return m.apply(t,arguments),this}return h||u(),s.dependencyDetection.registerDependency(a),c}function f(){return h||u(),c}function l(){return!h||E.length>0}var c,h=!1,p=!1,d=!1,v=e;v&&typeof v=="object"?(n=v,v=n.read):(n=n||{},v||(v=n.read));if(typeof v!="function")throw new Error("Pass a function that returns the value of the ko.computed");var m=n.write,g=n.disposeWhenNodeIsRemoved||n.disposeWhenNodeIsRemoved||null,y=n.disposeWhen||n.disposeWhen,b=y,w=i,E=[],S=null;return t||(t=n.owner),a.peek=f,a.getDependenciesCount=function(){return E.length},a.hasWriteFunction=typeof n.write=="function",a.dispose=function(){w()},a.isActive=l,s.subscribable.call(a),s.utils.extend(a,s.dependentObservable.fn),s.exportProperty(a,"peek",a.peek),s.exportProperty(a,"dispose",a.dispose),s.exportProperty(a,"isActive",a.isActive),s.exportProperty(a,"getDependenciesCount",a.getDependenciesCount),g&&(d=!0,g.nodeType&&(b=function(){return!s.utils.domNodeIsAttachedToDocument(g)||y&&y()})),n.deferEvaluation!==!0&&u(),g&&l()&&(w=function(){s.utils.domNodeDisposal.removeDisposeCallback(g,w),i()},s.utils.domNodeDisposal.addDisposeCallback(g,w)),a},s.isComputed=function(e){return s.hasPrototype(e,s.dependentObservable)};var l=s.observable.protoProperty;s.dependentObservable[l]=s.observable,s.dependentObservable.fn={equalityComparer:t},s.dependentObservable.fn[l]=s.dependentObservable,s.exportSymbol("dependentObservable",s.dependentObservable),s.exportSymbol("computed",s.dependentObservable),s.exportSymbol("isComputed",s.isComputed),function(){function e(r,i,s){s=s||new n,r=i(r);var o=typeof r=="object"&&r!==null&&r!==undefined&&!(r instanceof Date)&&!(r instanceof String)&&!(r instanceof Number)&&!(r instanceof Boolean);if(!o)return r;var u=r instanceof Array?[]:{};return s.save(r,u),t(r,function(t){var n=i(r[t]);switch(typeof n){case"boolean":case"number":case"string":case"function":u[t]=n;break;case"object":case"undefined":var o=s.get(n);u[t]=o!==undefined?o:e(n,i,s)}}),u}function t(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)t(n);typeof e["toJSON"]=="function"&&t("toJSON")}else for(var r in e)t(r)}function n(){this.keys=[],this.values=[]}var r=10;s.toJS=function(t){if(arguments.length==0)throw new Error("When calling ko.toJS, pass the object you want to convert.");return e(t,function(e){for(var t=0;s.isObservable(e)&&t<r;t++)e=e();return e})},s.toJSON=function(e,t,n){var r=s.toJS(e);return s.utils.stringifyJson(r,t,n)},n.prototype={constructor:n,save:function(e,t){var n=s.utils.arrayIndexOf(this.keys,e);n>=0?this.values[n]=t:(this.keys.push(e),this.values.push(t))},get:function(e){var t=s.utils.arrayIndexOf(this.keys,e);return t>=0?this.values[t]:undefined}}}(),s.exportSymbol("toJS",s.toJS),s.exportSymbol("toJSON",s.toJSON),function(){var e="__ko__hasDomDataOptionValue__";s.selectExtensions={readValue:function(t){switch(s.utils.tagNameLower(t)){case"option":if(t[e]===!0)return s.utils.domData.get(t,s.bindingHandlers.options.optionValueDomDataKey);return s.utils.ieVersion<=7?t.getAttributeNode("value")&&t.getAttributeNode("value").specified?t.value:t.text:t.value;case"select":return t.selectedIndex>=0?s.selectExtensions.readValue(t.options[t.selectedIndex]):undefined;default:return t.value}},writeValue:function(t,n){switch(s.utils.tagNameLower(t)){case"option":switch(typeof n){case"string":s.utils.domData.set(t,s.bindingHandlers.options.optionValueDomDataKey,undefined),e in t&&delete t[e],t.value=n;break;default:s.utils.domData.set(t,s.bindingHandlers.options.optionValueDomDataKey,n),t[e]=!0,t.value=typeof n=="number"?n:""}break;case"select":n===""&&(n=undefined);if(n===null||n===undefined)t.selectedIndex=-1;for(var r=t.options.length-1;r>=0;r--)if(s.selectExtensions.readValue(t.options[r])==n){t.selectedIndex=r;break}!(t.size>1)&&t.selectedIndex===-1&&(t.selectedIndex=0);break;default:if(n===null||n===undefined)n="";t.value=n}}}}(),s.exportSymbol("selectExtensions",s.selectExtensions),s.exportSymbol("selectExtensions.readValue",s.selectExtensions.readValue),s.exportSymbol("selectExtensions.writeValue",s.selectExtensions.writeValue),s.expressionRewriting=function(){function e(e){if(s.utils.arrayIndexOf(r,e)>=0)return!1;var t=e.match(i);return t===null?!1:t[1]?"Object("+t[1]+")"+t[2]:e}function t(e){var t=s.utils.stringTrim(e);t.charCodeAt(0)===123&&(t=t.slice(1,-1));var n=[],r=t.match(h),i,o,u=0;if(r){r.push(",");for(var a=0,f;f=r[a];++a){var l=f.charCodeAt(0);if(l===44){if(u<=0){i&&n.push(o?{key:i,value:o.join("")}:{unknown:i}),i=o=u=0;continue}}else if(l===58){if(!o)continue}else if(l===47&&a&&f.length>1){var c=r[a-1].match(p);c&&!d[c[0]]&&(t=t.substr(t.indexOf(f)+1),r=t.match(h),r.push(","),a=-1,f="/")}else if(l===40||l===123||l===91)++u;else if(l===41||l===125||l===93)--u;else if(!i&&!o){i=l===34||l===39?f.slice(1,-1):f;continue}o?o.push(f):o=[f]}}return n}function n(n,r){function i(t,n){function r(e){return e&&e.preprocess?n=e.preprocess(n,t,i):!0}var f;if(!r(s.getBindingHandler(t)))return;v[t]&&(f=e(n))&&u.push("'"+t+"':function(_z){"+f+"=_z}"),a&&(n="function(){return "+n+" }"),o.push("'"+t+"':"+n)}r=r||{};var o=[],u=[],a=r.valueAccessors,f=typeof n=="string"?t(n):n;return s.utils.arrayForEach(f,function(e){i(e.key||e.unknown,e.value)}),u.length&&i("_ko_property_writers","{"+u.join(",")+"}"),o.join(",")}var r=["true","false","null","undefined"],i=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,o='"(?:[^"\\\\]|\\\\.)*"',u="'(?:[^'\\\\]|\\\\.)*'",a="/(?:[^/\\\\]|\\\\.)*/w*",f=",\"'{}()/:[\\]",l="[^\\s:,/][^"+f+"]*[^\\s"+f+"]",c="[^\\s]",h=RegExp(o+"|"+u+"|"+a+"|"+l+"|"+c,"g"),p=/[\])"'A-Za-z0-9_$]+$/,d={"in":1,"return":1,"typeof":1},v={};return{bindingRewriteValidators:[],twoWayBindings:v,parseObjectLiteral:t,preProcessBindings:n,keyValueArrayContainsKey:function(e,t){for(var n=0;n<e.length;n++)if(e[n]["key"]==t)return!0;return!1},writeValueToProperty:function(e,t,n,r,i){if(!e||!s.isObservable(e)){var o=t.get("_ko_property_writers");o&&o[n]&&o[n](r)}else s.isWriteableObservable(e)&&(!i||e.peek()!==r)&&e(r)}}}(),s.exportSymbol("expressionRewriting",s.expressionRewriting),s.exportSymbol("expressionRewriting.bindingRewriteValidators",s.expressionRewriting.bindingRewriteValidators),s.exportSymbol("expressionRewriting.parseObjectLiteral",s.expressionRewriting.parseObjectLiteral),s.exportSymbol("expressionRewriting.preProcessBindings",s.expressionRewriting.preProcessBindings),s.exportSymbol("expressionRewriting._twoWayBindings",s.expressionRewriting.twoWayBindings),s.exportSymbol("jsonExpressionRewriting",s.expressionRewriting),s.exportSymbol("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",s.expressionRewriting.preProcessBindings),function(){function e(e){return e.nodeType==8&&u.test(o?e.text:e.nodeValue)}function t(e){return e.nodeType==8&&a.test(o?e.text:e.nodeValue)}function n(n,r){var i=n,s=1,o=[];while(i=i.nextSibling){if(t(i)){s--;if(s===0)return o}o.push(i),e(i)&&s++}if(!r)throw new Error("Cannot find closing comment tag to match: "+n.nodeValue);return null}function r(e,t){var r=n(e,t);return r?r.length>0?r[r.length-1].nextSibling:e.nextSibling:null}function i(n){var i=n.firstChild,s=null;if(i)do if(s)s.push(i);else if(e(i)){var o=r(i,!0);o?i=o:s=[i]}else t(i)&&(s=[i]);while(i=i.nextSibling);return s}var o=document&&document.createComment("test").text==="<!--test-->",u=o?/^<!--\s*ko(?:\s+([\s\S]+))?\s*-->$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,a=o?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/,f={ul:!0,ol:!0};s.virtualElements={allowedBindings:{},childNodes:function(t){return e(t)?n(t):t.childNodes},emptyNode:function(t){if(!e(t))s.utils.emptyDomNode(t);else{var n=s.virtualElements.childNodes(t);for(var r=0,i=n.length;r<i;r++)s.removeNode(n[r])}},setDomNodeChildren:function(t,n){if(!e(t))s.utils.setDomNodeChildren(t,n);else{s.virtualElements.emptyNode(t);var r=t.nextSibling;for(var i=0,o=n.length;i<o;i++)r.parentNode.insertBefore(n[i],r)}},prepend:function(t,n){e(t)?t.parentNode.insertBefore(n,t.nextSibling):t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)},insertAfter:function(t,n,r){r?e(t)?t.parentNode.insertBefore(n,r.nextSibling):r.nextSibling?t.insertBefore(n,r.nextSibling):t.appendChild(n):s.virtualElements.prepend(t,n)},firstChild:function(n){return e(n)?!n.nextSibling||t(n.nextSibling)?null:n.nextSibling:n.firstChild},nextSibling:function(n){return e(n)&&(n=r(n)),n.nextSibling&&t(n.nextSibling)?null:n.nextSibling},hasBindingValue:e,virtualNodeBindingValue:function(e){var t=(o?e.text:e.nodeValue).match(u);return t?t[1]:null},normaliseVirtualElementDomStructure:function(e){if(!f[s.utils.tagNameLower(e)])return;var t=e.firstChild;if(t)do if(t.nodeType===1){var n=i(t);if(n){var r=t.nextSibling;for(var o=0;o<n.length;o++)r?e.insertBefore(n[o],r):e.appendChild(n[o])}}while(t=t.nextSibling)}}}(),s.exportSymbol("virtualElements",s.virtualElements),s.exportSymbol("virtualElements.allowedBindings",s.virtualElements.allowedBindings),s.exportSymbol("virtualElements.emptyNode",s.virtualElements.emptyNode),s.exportSymbol("virtualElements.insertAfter",s.virtualElements.insertAfter),s.exportSymbol("virtualElements.prepend",s.virtualElements.prepend),s.exportSymbol("virtualElements.setDomNodeChildren",s.virtualElements.setDomNodeChildren),function(){function e(e,n,r){var i=e+(r&&r.valueAccessors||"");return n[i]||(n[i]=t(e,r))}function t(e,t){var n=s.expressionRewriting.preProcessBindings(e,t),r="with($context){with($data||{}){return{"+n+"}}}";return new Function("$context","$element",r)}var n="data-bind";s.bindingProvider=function(){this.bindingCache={}},s.utils.extend(s.bindingProvider.prototype,{nodeHasBindings:function(e){switch(e.nodeType){case 1:return e.getAttribute(n)!=null;case 8:return s.virtualElements.hasBindingValue(e);default:return!1}},getBindings:function(e,t){var n=this.getBindingsString(e,t);return n?this.parseBindingsString(n,t,e):null},getBindingAccessors:function(e,t){var n=this.getBindingsString(e,t);return n?this.parseBindingsString(n,t,e,{valueAccessors:!0}):null},getBindingsString:function(e,t){switch(e.nodeType){case 1:return e.getAttribute(n);case 8:return s.virtualElements.virtualNodeBindingValue(e);default:return null}},parseBindingsString:function(t,n,r,i){try{var s=e(t,this.bindingCache,i);return s(n,r)}catch(o){throw o.message="Unable to parse bindings.\nBindings value: "+t+"\nMessage: "+o.message,o}}}),s.bindingProvider.instance=new s.bindingProvider}(),s.exportSymbol("bindingProvider",s.bindingProvider),function(){function e(e){return function(){return e}}function t(e){return e()}function n(e){return s.utils.objectMap(s.dependencyDetection.ignore(e),function(t,n){return function(){return e()[n]}})}function r(t,r,i){return typeof t=="function"?n(t.bind(null,r,i)):s.utils.objectMap(t,e)}function i(e,t){return n(this.getBindings.bind(this,e,t))}function o(e){var t=s.virtualElements.allowedBindings[e];if(!t)throw new Error("The binding '"+e+"' cannot be used with virtual elements")}function u(e,t,n){var r,i=s.virtualElements.firstChild(t),o=s.bindingProvider.instance,u=o.preprocessNode;if(u){while(r=i)i=s.virtualElements.nextSibling(r),u.call(o,r);i=s.virtualElements.firstChild(t)}while(r=i)i=s.virtualElements.nextSibling(r),a(e,r,n)}function a(e,t,n){var r=!0,i=t.nodeType===1;i&&s.virtualElements.normaliseVirtualElementDomStructure(t);var o=i&&n||s.bindingProvider.instance.nodeHasBindings(t);o&&(r=l(t,null,e,n).shouldBindDescendants),r&&!h[s.utils.tagNameLower(t)]&&u(e,t,!i)}function f(e){var t=[],n={},r=[];return s.utils.objectForEach(e,function i(o){if(!n[o]){var u=s.getBindingHandler(o);u&&(u.after&&(r.push(o),s.utils.arrayForEach(u.after,function(t){if(e[t]){if(s.utils.arrayIndexOf(r,t)!==-1)throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+r.join(", "));i(t)}}),r.pop()),t.push({key:o,handler:u})),n[o]=!0}}),t}function l(e,n,r,u){var a=s.utils.domData.get(e,p);if(!n){if(a)throw Error("You cannot apply bindings multiple times to the same element.");s.utils.domData.set(e,p,!0)}!a&&u&&s.storedBindingContextForNode(e,r);var l;if(n&&typeof n!="function")l=n;else{var c=s.bindingProvider.instance,h=c.getBindingAccessors||i;if(n||r._subscribable){var d=s.dependentObservable(function(){return l=n?n(r,e):h.call(c,e,r),l&&r._subscribable&&r._subscribable(),l},null,{disposeWhenNodeIsRemoved:e});if(!l||!d.isActive())d=null}else l=s.dependencyDetection.ignore(h,c,[e,r])}var v;if(l){var m=d?function(e){return function(){return t(d()[e])}}:function(e){return l[e]};function g(){return s.utils.objectMap(d?d():l,t)}g.get=function(e){return l[e]&&t(m(e))},g.has=function(e){return e in l};var y=f(l);s.utils.arrayForEach(y,function(t){var n=t.handler.init,i=t.handler.update,u=t.key;e.nodeType===8&&o(u);try{typeof n=="function"&&s.dependencyDetection.ignore(function(){var t=n(e,m(u),g,r.$data,r);if(t&&t.controlsDescendantBindings){if(v!==undefined)throw new Error("Multiple bindings ("+v+" and "+u+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");v=u}}),typeof i=="function"&&s.dependentObservable(function(){i(e,m(u),g,r.$data,r)},null,{disposeWhenNodeIsRemoved:e})}catch(a){throw a.message='Unable to process binding "'+u+": "+l[u]+'"\nMessage: '+a.message,a}})}return{shouldBindDescendants:v===undefined}}function c(e){return e&&e instanceof s.bindingContext?e:new s.bindingContext(e)}s.bindingHandlers={};var h={script:!0};s.getBindingHandler=function(e){return s.bindingHandlers[e]},s.bindingContext=function(e,t,n,r){function i(){var i=a?e():e;return t?(t._subscribable&&t._subscribable(),s.utils.extend(u,t),l&&(u._subscribable=l)):(u.$parents=[],u.$root=i,u.ko=s),u.$rawData=e,u.$data=i,n&&(u[n]=i),r&&r(u,t,i),u.$data}function o(){return f&&!s.utils.anyDomNodeIsAttachedToDocument(f)}var u=this,a=typeof e=="function",f,l=s.dependentObservable(i,null,{disposeWhen:o,disposeWhenNodeIsRemoved:!0});l.isActive()&&(u._subscribable=l,l.equalityComparer=null,f=[],l._addNode=function(e){f.push(e),s.utils.domNodeDisposal.addDisposeCallback(e,function(e){s.utils.arrayRemoveItem(f,e),f.length||(l.dispose(),u._subscribable=l=undefined)})})},s.bindingContext.prototype.createChildContext=function(e,t,n){return new s.bindingContext(e,this,t,function(e,t){e.$parentContext=t,e.$parent=t.$data,e.$parents=(t.$parents||[]).slice(0),e.$parents.unshift(e.$parent),n&&n(e)})},s.bindingContext.prototype.extend=function(e){return new s.bindingContext(this.$rawData,this,null,function(t){s.utils.extend(t,typeof e=="function"?e():e)})};var p=s.utils.domData.nextKey(),d=s.utils.domData.nextKey();s.storedBindingContextForNode=function(e,t){if(arguments.length!=2)return s.utils.domData.get(e,d);s.utils.domData.set(e,d,t),t._subscribable&&t._subscribable._addNode(e)},s.applyBindingAccessorsToNode=function(e,t,n){return e.nodeType===1&&s.virtualElements.normaliseVirtualElementDomStructure(e),l(e,t,c(n),!0)},s.applyBindingsToNode=function(e,t,n){var i=c(n);return s.applyBindingAccessorsToNode(e,r(t,i,e),i)},s.applyBindingsToDescendants=function(e,t){(t.nodeType===1||t.nodeType===8)&&u(c(e),t,!0)},s.applyBindings=function(e,t){if(t&&t.nodeType!==1&&t.nodeType!==8)throw new Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");t=t||window.document.body,a(c(e),t,!0)},s.contextFor=function(e){switch(e.nodeType){case 1:case 8:var t=s.storedBindingContextForNode(e);if(t)return t;if(e.parentNode)return s.contextFor(e.parentNode)}return undefined},s.dataFor=function(e){var t=s.contextFor(e);return t?t.$data:undefined},s.exportSymbol("bindingHandlers",s.bindingHandlers),s.exportSymbol("applyBindings",s.applyBindings),s.exportSymbol("applyBindingsToDescendants",s.applyBindingsToDescendants),s.exportSymbol("applyBindingAccessorsToNode",s.applyBindingAccessorsToNode),s.exportSymbol("applyBindingsToNode",s.applyBindingsToNode),s.exportSymbol("contextFor",s.contextFor),s.exportSymbol("dataFor",s.dataFor)}();var c={"class":"className","for":"htmlFor"};s.bindingHandlers.attr={update:function(e,t,n){var r=s.utils.unwrapObservable(t())||{};s.utils.objectForEach(r,function(t,n){n=s.utils.unwrapObservable(n);var r=n===!1||n===null||n===undefined;r&&e.removeAttribute(t),s.utils.ieVersion<=8&&t in c?(t=c[t],r?e.removeAttribute(t):e[t]=n):r||e.setAttribute(t,n.toString()),t==="name"&&s.utils.setElementName(e,r?"":n.toString())})}},function(){s.bindingHandlers.checked={after:["value","attr"],init:function(e,t,n){function r(){return n.has("checkedValue")?s.utils.unwrapObservable(n.get("checkedValue")):e.value}function i(){var i=e.checked,o=c?r():i;if(!h)return;if(a&&!i)return;var u=s.dependencyDetection.ignore(t);f?l!==o?(i&&(s.utils.addOrRemoveItem(u,o,!0),s.utils.addOrRemoveItem(u,l,!1)),l=o):s.utils.addOrRemoveItem(u,o,i):s.expressionRewriting.writeValueToProperty(u,n,"checked",o,!0)}function o(){var n=s.utils.unwrapObservable(t());f?e.checked=s.utils.arrayIndexOf(n,r())>=0:u?e.checked=n:e.checked=r()===n}var u=e.type=="checkbox",a=e.type=="radio";if(!u&&!a)return;var f=u&&s.utils.unwrapObservable(t())instanceof Array,l=f?r():undefined,c=a||f,h=!1;a&&!e.name&&s.bindingHandlers.uniqueName.init(e,function(){return!0}),s.dependentObservable(i,null,{disposeWhenNodeIsRemoved:e}),s.utils.registerEventHandler(e,"click",i),s.dependentObservable(o,null,{disposeWhenNodeIsRemoved:e}),h=!0}},s.expressionRewriting.twoWayBindings.checked=!0,s.bindingHandlers.checkedValue={update:function(e,t){e.value=s.utils.unwrapObservable(t())}}}();var h="__ko__cssValue";s.bindingHandlers.css={update:function(e,t){var n=s.utils.unwrapObservable(t());typeof n=="object"?s.utils.objectForEach(n,function(t,n){n=s.utils.unwrapObservable(n),s.utils.toggleDomNodeCssClass(e,t,n)}):(n=String(n||""),s.utils.toggleDomNodeCssClass(e,e[h],!1),e[h]=n,s.utils.toggleDomNodeCssClass(e,n,!0))}},s.bindingHandlers.enable={update:function(e,t){var n=s.utils.unwrapObservable(t());n&&e.disabled?e.removeAttribute("disabled"):!n&&!e.disabled&&(e.disabled=!0)}},s.bindingHandlers.disable={update:function(e,t){s.bindingHandlers.enable.update(e,function(){return!s.utils.unwrapObservable(t())})}},s.bindingHandlers.event={init:function(e,t,n,r,i){var o=t()||{};s.utils.objectForEach(o,function(o){typeof o=="string"&&s.utils.registerEventHandler(e,o,function(e){var u,a=t()[o];if(!a)return;try{var f=s.utils.makeArray(arguments);r=i.$data,f.unshift(r),u=a.apply(r,f)}finally{u!==!0&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}var l=n.get(o+"Bubble")!==!1;l||(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())})})}},s.bindingHandlers.foreach={makeTemplateValueAccessor:function(e){return function(){var t=e(),n=s.utils.peekObservable(t);return!n||typeof n.length=="number"?{foreach:t,templateEngine:s.nativeTemplateEngine.instance}:(s.utils.unwrapObservable(t),{foreach:n.data,as:n.as,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:s.nativeTemplateEngine.instance})}},init:function(e,t,n,r,i){return s.bindingHandlers.template.init(e,s.bindingHandlers.foreach.makeTemplateValueAccessor(t))},update:function(e,t,n,r,i){return s.bindingHandlers.template.update(e,s.bindingHandlers.foreach.makeTemplateValueAccessor(t),n,r,i)}},s.expressionRewriting.bindingRewriteValidators.foreach=!1,s.virtualElements.allowedBindings.foreach=!0;var p="__ko_hasfocusUpdating",d="__ko_hasfocusLastValue";s.bindingHandlers.hasfocus={init:function(e,t,n){var r=function(r){e[p]=!0;var i=e.ownerDocument;if("activeElement"in i){var o;try{o=i.activeElement}catch(u){o=i.body}r=o===e}var a=t();s.expressionRewriting.writeValueToProperty(a,n,"hasfocus",r,!0),e[d]=r,e[p]=!1},i=r.bind(null,!0),o=r.bind(null,!1);s.utils.registerEventHandler(e,"focus",i),s.utils.registerEventHandler(e,"focusin",i),s.utils.registerEventHandler(e,"blur",o),s.utils.registerEventHandler(e,"focusout",o)},update:function(e,t){var n=!!s.utils.unwrapObservable(t());!e[p]&&e[d]!==n&&(n?e.focus():e.blur(),s.dependencyDetection.ignore(s.utils.triggerEvent,null,[e,n?"focusin":"focusout"]))}},s.expressionRewriting.twoWayBindings.hasfocus=!0,s.bindingHandlers.hasFocus=s.bindingHandlers.hasfocus,s.expressionRewriting.twoWayBindings.hasFocus=!0,s.bindingHandlers.html={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){s.utils.setHtml(e,t())}};var v=s.utils.domData.nextKey();i("if"),i("ifnot",!1,!0),i("with",!0,!1,function(e,t){return e.createChildContext(t)}),s.bindingHandlers.options={init:function(e){if(s.utils.tagNameLower(e)!=="select")throw new Error("options binding applies only to SELECT elements");while(e.length>0)e.remove(0);return{controlsDescendantBindings:!0}},update:function(e,t,n){function r(){return s.utils.arrayFilter(e.options,function(e){return e.selected})}function i(e,t,n){var r=typeof t;return r=="function"?t(e):r=="string"?e[t]:n}function o(e,t,r){r.length&&(d=r[0].selected?[s.selectExtensions.readValue(r[0])]:[],m=!0);var o=document.createElement("option");if(e===h)s.utils.setTextContent(o,n.get("optionsCaption")),s.selectExtensions.writeValue(o,undefined);else{var u=i(e,n.get("optionsValue"),e);s.selectExtensions.writeValue(o,s.utils.unwrapObservable(u));var a=i(e,n.get("optionsText"),u);s.utils.setTextContent(o,a)}return[o]}function u(t,n){if(d.length){var r=s.utils.arrayIndexOf(d,s.selectExtensions.readValue(n[0]))>=0;s.utils.setOptionNodeSelectionState(n[0],r),m&&!r&&s.dependencyDetection.ignore(s.utils.triggerEvent,null,[e,"change"])}}var a=e.length==0,f=!a&&e.multiple?e.scrollTop:null,l=s.utils.unwrapObservable(t()),c=n.get("optionsIncludeDestroyed"),h={},p,d;e.multiple?d=s.utils.arrayMap(r(),s.selectExtensions.readValue):d=e.selectedIndex>=0?[s.selectExtensions.readValue(e.options[e.selectedIndex])]:[];if(l){typeof l.length=="undefined"&&(l=[l]);var v=s.utils.arrayFilter(l,function(e){return c||e===undefined||e===null||!s.utils.unwrapObservable(e._destroy)});n.has("optionsCaption")&&(p=s.utils.unwrapObservable(n.get("optionsCaption")),p!==null&&p!==undefined&&v.unshift(h))}else l=[];var m=!1,g=u;n.has("optionsAfterRender")&&(g=function(e,t){u(e,t),s.dependencyDetection.ignore(n.get("optionsAfterRender"),null,[t[0],e!==h?e:undefined])}),s.utils.setDomNodeChildrenFromArrayMapping(e,v,o,null,g);var y;e.multiple?y=d.length&&r().length<d.length:y=d.length&&e.selectedIndex>=0?s.selectExtensions.readValue(e.options[e.selectedIndex])!==d[0]:d.length||e.selectedIndex>=0,y&&s.dependencyDetection.ignore(s.utils.triggerEvent,null,[e,"change"]),s.utils.ensureSelectElementIsRenderedCorrectly(e),f&&Math.abs(f-e.scrollTop)>20&&(e.scrollTop=f)}},s.bindingHandlers.options.optionValueDomDataKey=s.utils.domData.nextKey(),s.bindingHandlers.selectedOptions={after:["options","foreach"],init:function(e,t,n){s.utils.registerEventHandler(e,"change",function(){var r=t(),i=[];s.utils.arrayForEach(e.getElementsByTagName("option"),function(e){e.selected&&i.push(s.selectExtensions.readValue(e))}),s.expressionRewriting.writeValueToProperty(r,n,"selectedOptions",i)})},update:function(e,t){if(s.utils.tagNameLower(e)!="select")throw new Error("values binding applies only to SELECT elements");var n=s.utils.unwrapObservable(t());n&&typeof n.length=="number"&&s.utils.arrayForEach(e.getElementsByTagName("option"),function(e){var t=s.utils.arrayIndexOf(n,s.selectExtensions.readValue(e))>=0;s.utils.setOptionNodeSelectionState(e,t)})}},s.expressionRewriting.twoWayBindings.selectedOptions=!0,s.bindingHandlers.style={update:function(e,t){var n=s.utils.unwrapObservable(t()||{});s.utils.objectForEach(n,function(t,n){n=s.utils.unwrapObservable(n),e.style[t]=n||""})}},s.bindingHandlers.submit={init:function(e,t,n,r,i){if(typeof t()!="function")throw new Error("The value for a submit binding must be a function");s.utils.registerEventHandler(e,"submit",function(n){var r,s=t();try{r=s.call(i.$data,e)}finally{r!==!0&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}})}},s.bindingHandlers.text={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){s.utils.setTextContent(e,t())}},s.virtualElements.allowedBindings.text=!0,s.bindingHandlers.uniqueName={init:function(e,t){if(t()){var n="ko_unique_"+ ++s.bindingHandlers.uniqueName.currentIndex;s.utils.setElementName(e,n)}}},s.bindingHandlers.uniqueName.currentIndex=0,s.bindingHandlers.value={after:["options","foreach"],init:function(e,t,n){var r=["change"],i=n.get("valueUpdate"),o=!1;i&&(typeof i=="string"&&(i=[i]),s.utils.arrayPushAll(r,i),r=s.utils.arrayGetDistinctValues(r));var u=function(){o=!1;var r=t(),i=s.selectExtensions.readValue(e);s.expressionRewriting.writeValueToProperty(r,n,"value",i)},a=s.utils.ieVersion&&e.tagName.toLowerCase()=="input"&&e.type=="text"&&e.autocomplete!="off"&&(!e.form||e.form.autocomplete!="off");a&&s.utils.arrayIndexOf(r,"propertychange")==-1&&(s.utils.registerEventHandler(e,"propertychange",function(){o=!0}),s.utils.registerEventHandler(e,"blur",function(){o&&u()})),s.utils.arrayForEach(r,function(t){var n=u;s.utils.stringStartsWith(t,"after")&&(n=function(){setTimeout(u,0)},t=t.substring("after".length)),s.utils.registerEventHandler(e,t,n)})},update:function(e,t){var n=s.utils.tagNameLower(e)==="select",r=s.utils.unwrapObservable(t()),i=s.selectExtensions.readValue(e),o=r!==i;if(o){var u=function(){s.selectExtensions.writeValue(e,r)};u(),n&&(r!==s.selectExtensions.readValue(e)?s.dependencyDetection.ignore(s.utils.triggerEvent,null,[e,"change"]):setTimeout(u,0))}}},s.expressionRewriting.twoWayBindings.value=!0,s.bindingHandlers.visible={update:function(e,t){var n=s.utils.unwrapObservable(t()),r=e.style.display!="none";n&&!r?e.style.display="":!n&&r&&(e.style.display="none")}},r("click"),s.templateEngine=function(){},s.templateEngine.prototype.renderTemplateSource=function(e,t,n){throw new Error("Override renderTemplateSource")},s.templateEngine.prototype.createJavaScriptEvaluatorBlock=function(e){throw new Error("Override createJavaScriptEvaluatorBlock")},s.templateEngine.prototype.makeTemplateSource=function(e,t){if(typeof e=="string"){t=t||document;var n=t.getElementById(e);if(!n)throw new Error("Cannot find template with ID "+e);return new s.templateSources.domElement(n)}if(e.nodeType==1||e.nodeType==8)return new s.templateSources.anonymousTemplate(e);throw new Error("Unknown template type: "+e)},s.templateEngine.prototype.renderTemplate=function(e,t,n,r){var i=this.makeTemplateSource(e,r);return this.renderTemplateSource(i,t,n)},s.templateEngine.prototype.isTemplateRewritten=function(e,t){return this.allowTemplateRewriting===!1?!0:this.makeTemplateSource(e,t).data("isRewritten")},s.templateEngine.prototype.rewriteTemplate=function(e,t,n){var r=this.makeTemplateSource(e,n),i=t(r.text());r.text(i),r.data("isRewritten",!0)},s.exportSymbol("templateEngine",s.templateEngine),s.templateRewriting=function(){function e(e){var t=s.expressionRewriting.bindingRewriteValidators;for(var n=0;n<e.length;n++){var r=e[n].key;if(t.hasOwnProperty(r)){var i=t[r];if(typeof i=="function"){var o=i(e[n].value);if(o)throw new Error(o)}else if(!i)throw new Error("This template engine does not support the '"+r+"' binding within its templates")}}}function t(t,n,r,i){var o=s.expressionRewriting.parseObjectLiteral(t);e(o);var u=s.expressionRewriting.preProcessBindings(o,{valueAccessors:!0}),a="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+u+" } })()},'"+r.toLowerCase()+"')";return i.createJavaScriptEvaluatorBlock(a)+n}var n=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,r=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;return{ensureTemplateIsRewritten:function(e,t,n){t.isTemplateRewritten(e,n)||t.rewriteTemplate(e,function(e){return s.templateRewriting.memoizeBindingAttributeSyntax(e,t)},n)},memoizeBindingAttributeSyntax:function(e,i){return e.replace(n,function(){return t(arguments[4],arguments[1],arguments[2],i)}).replace(r,function(){return t(arguments[1],"<!-- ko -->","#comment",i)})},applyMemoizedBindingsToNextSibling:function(e,t){return s.memoization.memoize(function(n,r){var i=n.nextSibling;i&&i.nodeName.toLowerCase()===t&&s.applyBindingAccessorsToNode(i,e,r)})}}}(),s.exportSymbol("__tr_ambtns",s.templateRewriting.applyMemoizedBindingsToNextSibling),function(){s.templateSources={},s.templateSources.domElement=function(e){this.domElement=e},s.templateSources.domElement.prototype.text=function(){var e=s.utils.tagNameLower(this.domElement),t=e==="script"?"text":e==="textarea"?"value":"innerHTML";if(arguments.length==0)return this.domElement[t];var n=arguments[0];t==="innerHTML"?s.utils.setHtml(this.domElement,n):this.domElement[t]=n};var e=s.utils.domData.nextKey()+"_";s.templateSources.domElement.prototype.data=function(t){if(arguments.length===1)return s.utils.domData.get(this.domElement,e+t);s.utils.domData.set(this.domElement,e+t,arguments[1])};var t=s.utils.domData.nextKey();s.templateSources.anonymousTemplate=function(e){this.domElement=e},s.templateSources.anonymousTemplate.prototype=new s.templateSources.domElement,s.templateSources.anonymousTemplate.prototype.constructor=s.templateSources.anonymousTemplate,s.templateSources.anonymousTemplate.prototype.text=function(){if(arguments.length==0){var e=s.utils.domData.get(this.domElement,t)||{};return e.textData===undefined&&e.containerData&&(e.textData=e.containerData.innerHTML),e.textData}var n=arguments[0];s.utils.domData.set(this.domElement,t,{textData:n})},s.templateSources.domElement.prototype.nodes=function(){if(arguments.length==0){var e=s.utils.domData.get(this.domElement,t)||{};return e.containerData}var n=arguments[0];s.utils.domData.set(this.domElement,t,{containerData:n})},s.exportSymbol("templateSources",s.templateSources),s.exportSymbol("templateSources.domElement",s.templateSources.domElement),s.exportSymbol("templateSources.anonymousTemplate",s.templateSources.anonymousTemplate)}(),function(){function e(e,t,n){var r,i=e,o=s.virtualElements.nextSibling(t);while(i&&(r=i)!==o)i=s.virtualElements.nextSibling(r),n(r,i)}function t(t,n){if(t.length){var r=t[0],i=t[t.length-1],o=r.parentNode,u=s.bindingProvider.instance,a=u.preprocessNode;if(a){e(r,i,function(e,t){var n=e.previousSibling,s=a.call(u,e);s&&(e===r&&(r=s[0]||t),e===i&&(i=s[s.length-1]||n))}),t.length=0;if(!r)return;r===i?t.push(r):(t.push(r,i),s.utils.fixUpContinuousNodeArray(t,o))}e(r,i,function(e){(e.nodeType===1||e.nodeType===8)&&s.applyBindings(n,e)}),e(r,i,function(e){(e.nodeType===1||e.nodeType===8)&&s.memoization.unmemoizeDomNodeAndDescendants(e,[n])}),s.utils.fixUpContinuousNodeArray(t,o)}}function n(e){return e.nodeType?e:e.length>0?e[0]:null}function r(e,r,i,u,a){a=a||{};var f=e&&n(e),l=f&&f.ownerDocument,c=a.templateEngine||o;s.templateRewriting.ensureTemplateIsRewritten(i,c,l);var h=c.renderTemplate(i,u,a,l);if(typeof h.length!="number"||h.length>0&&typeof h[0].nodeType!="number")throw new Error("Template engine must return an array of DOM nodes");var p=!1;switch(r){case"replaceChildren":s.virtualElements.setDomNodeChildren(e,h),p=!0;break;case"replaceNode":s.utils.replaceDomNodes(e,h),p=!0;break;case"ignoreTargetNode":break;default:throw new Error("Unknown renderMode: "+r)}return p&&(t(h,u),a.afterRender&&s.dependencyDetection.ignore(a.afterRender,null,[h,u.$data])),h}function i(e,t){var n=s.utils.domData.get(e,u);n&&typeof n.dispose=="function"&&n.dispose(),s.utils.domData.set(e,u,t&&t.isActive()?t:undefined)}var o;s.setTemplateEngine=function(e){if(!(e==undefined||e instanceof s.templateEngine))throw new Error("templateEngine must inherit from ko.templateEngine");o=e},s.renderTemplate=function(e,t,i,u,a){i=i||{};if((i["templateEngine"]||o)==undefined)throw new Error("Set a template engine before calling renderTemplate");a=a||"replaceChildren";if(u){var f=n(u),l=function(){return!f||!s.utils.domNodeIsAttachedToDocument(f)},c=f&&a=="replaceNode"?f.parentNode:f;return s.dependentObservable(function(){var o=t&&t instanceof s.bindingContext?t:new s.bindingContext(s.utils.unwrapObservable(t)),l=typeof e=="function"?e(o.$data,o):e,c=r(u,a,l,o,i);a=="replaceNode"&&(u=c,f=n(u))},null,{disposeWhen:l,disposeWhenNodeIsRemoved:c})}return s.memoization.memoize(function(n){s.renderTemplate(e,t,i,n,"replaceNode")})},s.renderTemplateForEach=function(e,n,i,o,u){var a,f=function(t,n){a=u.createChildContext(t,i.as,function(e){e.$index=n});var s=typeof e=="function"?e(t,a):e;return r(null,"ignoreTargetNode",s,a,i)},l=function(e,n,r){t(n,a),i.afterRender&&i.afterRender(n,e)};return s.dependentObservable(function(){var e=s.utils.unwrapObservable(n)||[];typeof e.length=="undefined"&&(e=[e]);var t=s.utils.arrayFilter(e,function(e){return i.includeDestroyed||e===undefined||e===null||!s.utils.unwrapObservable(e._destroy)});s.dependencyDetection.ignore(s.utils.setDomNodeChildrenFromArrayMapping,null,[o,t,f,i,l])},null,{disposeWhenNodeIsRemoved:o})};var u=s.utils.domData.nextKey();s.bindingHandlers.template={init:function(e,t){var n=s.utils.unwrapObservable(t());if(typeof n=="string"||n.name)s.virtualElements.emptyNode(e);else{var r=s.virtualElements.childNodes(e),i=s.utils.moveCleanedNodesToContainerElement(r);(new s.templateSources.anonymousTemplate(e)).nodes(i)}return{controlsDescendantBindings:!0}},update:function(e,t,n,r,o){var u=s.utils.unwrapObservable(t()),a={},f=!0,l,c=null;typeof u!="string"&&(a=u,u=s.utils.unwrapObservable(a.name),"if"in a&&(f=s.utils.unwrapObservable(a["if"])),f&&"ifnot"in a&&(f=!s.utils.unwrapObservable(a.ifnot)),l=s.utils.unwrapObservable(a.data));if("foreach"in a){var h=f&&a.foreach||[];c=s.renderTemplateForEach(u||e,h,a,e,o)}else if(!f)s.virtualElements.emptyNode(e);else{var p="data"in a?o.createChildContext(l,a.as):o;c=s.renderTemplate(u||e,p,a,e)}i(e,c)}},s.expressionRewriting.bindingRewriteValidators.template=function(e){var t=s.expressionRewriting.parseObjectLiteral(e);return t.length==1&&t[0].unknown?null:s.expressionRewriting.keyValueArrayContainsKey(t,"name")?null:"This template engine does not support anonymous templates nested within its templates"},s.virtualElements.allowedBindings.template=!0}(),s.exportSymbol("setTemplateEngine",s.setTemplateEngine),s.exportSymbol("renderTemplate",s.renderTemplate),s.utils.compareArrays=function(){function e(e,i,s){return s=typeof s=="boolean"?{dontLimitMoves:s}:s||{},e=e||[],i=i||[],e.length<=i.length?t(e,i,n,r,s):t(i,e,r,n,s)}function t(e,t,n,r,i){var s=Math.min,o=Math.max,u=[],a,f=e.length,l,c=t.length,h=c-f||1,p=f+c+1,d,v,m,g;for(a=0;a<=f;a++){v=d,u.push(d=[]),m=s(c,a+h),g=o(0,a-1);for(l=g;l<=m;l++)if(!l)d[l]=a+1;else if(!a)d[l]=l+1;else if(e[a-1]===t[l-1])d[l]=v[l-1];else{var y=v[l]||p,b=d[l-1]||p;d[l]=s(y,b)+1}}var w=[],E,S=[],x=[];for(a=f,l=c;a||l;)E=u[a][l]-1,l&&E===u[a][l-1]?S.push(w[w.length]={status:n,value:t[--l],index:l}):a&&E===u[a-1][l]?x.push(w[w.length]={status:r,value:e[--a],index:a}):(--l,--a,i.sparse||w.push({status:"retained",value:t[l]}));if(S.length&&x.length){var T=f*10,N,C,k,L,A;for(N=C=0;(i.dontLimitMoves||N<T)&&(L=S[C]);C++){for(k=0;A=x[k];k++)if(L.value===A.value){L.moved=A.index,A.moved=L.index,x.splice(k,1),N=k=0;break}N+=k}}return w.reverse()}var n="added",r="deleted";return e}(),s.exportSymbol("utils.compareArrays",s.utils.compareArrays),function(){function e(e,t,n,r,i){var o=[],u=s.dependentObservable(function(){var u=t(n,i,s.utils.fixUpContinuousNodeArray(o,e))||[];o.length>0&&(s.utils.replaceDomNodes(o,u),r&&s.dependencyDetection.ignore(r,null,[n,u,i])),o.splice(0,o.length),s.utils.arrayPushAll(o,u)},null,{disposeWhenNodeIsRemoved:e,disposeWhen:function(){return!s.utils.anyDomNodeIsAttachedToDocument(o)}});return{mappedNodes:o,dependentObservable:u.isActive()?u:undefined}}var t=s.utils.domData.nextKey();s.utils.setDomNodeChildrenFromArrayMapping=function(n,r,i,o,u){function a(e,t){S=c[t],m!==t&&(w[e]=S),S.indexObservable(m++),s.utils.fixUpContinuousNodeArray(S.mappedNodes,n),d.push(S),y.push(S)}function f(e,t){if(e)for(var n=0,r=t.length;n<r;n++)t[n]&&s.utils.arrayForEach(t[n].mappedNodes,function(r){e(r,n,t[n].arrayEntry)})}r=r||[],o=o||{};var l=s.utils.domData.get(n,t)===undefined,c=s.utils.domData.get(n,t)||[],h=s.utils.arrayMap(c,function(e){return e.arrayEntry}),p=s.utils.compareArrays(h,r,o.dontLimitMoves),d=[],v=0,m=0,g=[],y=[],b=[],w=[],E=[],S;for(var x=0,T,N;T=p[x];x++){N=T.moved;switch(T.status){case"deleted":N===undefined&&(S=c[v],S.dependentObservable&&S.dependentObservable.dispose(),g.push.apply(g,s.utils.fixUpContinuousNodeArray(S.mappedNodes,n)),o.beforeRemove&&(b[x]=S,y.push(S))),v++;break;case"retained":a(x,v++);break;case"added":N!==undefined?a(x,N):(S={arrayEntry:T.value,indexObservable:s.observable(m++)},d.push(S),y.push(S),l||(E[x]=S))}}f(o.beforeMove,w),s.utils.arrayForEach(g,o.beforeRemove?s.cleanNode:s.removeNode);for(var x=0,C=s.virtualElements.firstChild(n),k,L;S=y[x];x++){S.mappedNodes||s.utils.extend(S,e(n,i,S.arrayEntry,u,S.indexObservable));for(var A=0;L=S.mappedNodes[A];C=L.nextSibling,k=L,A++)L!==C&&s.virtualElements.insertAfter(n,L,k);!S.initialized&&u&&(u(S.arrayEntry,S.mappedNodes,S.indexObservable),S.initialized=!0)}f(o.beforeRemove,b),f(o.afterMove,w),f(o.afterAdd,E),s.utils.domData.set(n,t,d)}}(),s.exportSymbol("utils.setDomNodeChildrenFromArrayMapping",s.utils.setDomNodeChildrenFromArrayMapping),s.nativeTemplateEngine=function(){this.allowTemplateRewriting=!1},s.nativeTemplateEngine.prototype=new s.templateEngine,s.nativeTemplateEngine.prototype.constructor=s.nativeTemplateEngine,s.nativeTemplateEngine.prototype.renderTemplateSource=function(e,t,n){var r=!(s.utils.ieVersion<9),i=r?e.nodes:null,o=i?e.nodes():null;if(o)return s.utils.makeArray(o.cloneNode(!0).childNodes);var u=e.text();return s.utils.parseHtmlFragment(u)},s.nativeTemplateEngine.instance=new s.nativeTemplateEngine,s.setTemplateEngine(s.nativeTemplateEngine.instance),s.exportSymbol("nativeTemplateEngine",s.nativeTemplateEngine),function(){s.jqueryTmplTemplateEngine=function(){function e(){if(n<2)throw new Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.")}function t(e,t,n){return jQuery.tmpl(e,t,n)}var n=this.jQueryTmplVersion=function(){if(typeof jQuery=="undefined"||!jQuery.tmpl)return 0;try{if(jQuery.tmpl.tag.tmpl.open.toString().indexOf("__")>=0)return 2}catch(e){}return 1}();this.renderTemplateSource=function(n,r,i){i=i||{},e();var s=n.data("precompiled");if(!s){var o=n.text()||"";o="{{ko_with $item.koBindingContext}}"+o+"{{/ko_with}}",s=jQuery.template(null,o),n.data("precompiled",s)}var u=[r.$data],a=jQuery.extend({koBindingContext:r},i.templateOptions),f=t(s,u,a);return f.appendTo(document.createElement("div")),jQuery.fragments={},f},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,t){document.write("<script type='text/html' id='"+e+"'>"+t+"<"+"/script>")},n>0&&(jQuery.tmpl.tag.ko_code={open:"__.push($1 || '');"},jQuery.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},s.jqueryTmplTemplateEngine.prototype=new s.templateEngine,s.jqueryTmplTemplateEngine.prototype.constructor=s.jqueryTmplTemplateEngine;var e=new s.jqueryTmplTemplateEngine;e.jQueryTmplVersion>0&&s.setTemplateEngine(e),s.exportSymbol("jqueryTmplTemplateEngine",s.jqueryTmplTemplateEngine)}()})})()})();