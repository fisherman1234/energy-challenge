if(!DevExpress.MOD_VIZ_VECTORMAP){if(!window.DevExpress)throw Error("Required module is not referenced: core");if(!DevExpress.MOD_VIZ_CORE)throw Error("Required module is not referenced: viz-core");(function(e,t,n){function r(e,t){e.data("index",t)}function i(e){return e.data("index")}function s(e){return this._projection.parseAreaData(e.coordinates)}function o(e){if(e.geometry){var t=e.geometry.type,n=e.geometry.coordinates;if(n&&(t==="Polygon"||t==="MultiPolygon"))return t==="MultiPolygon"&&(n=[].concat.apply([],n)),this._projection.parseAreaGeoJsonData(n)}return[]}function u(){var e=this._projection.getZoom();this._projection.setCenter(null).setZoom(null),this._applyTransform(e!==this._projection.getZoom())}function a(e,t){this._projection.moveCenter(e,t),this._applyTransform()}function f(e){this._projection.setZoom(e),this._applyTransform(!0)}function l(e){e.data=i(e.$target),this._controlBar.processStart(e)}function c(e){e.data=i(e.$target),this._controlBar.processMove(e)}function h(e){e.data=i(e.$target),this._controlBar.processEnd(e)}function p(e){this._controlBar.processWheel(e)}function d(t){var n=i(t.$target);switch(t.category){case"areas":this._setAreaHover(this._areasInfo[n],!0);break;case"markers":this._setMarkerHover(this._markersInfo[n],!0);break;default:e.utils.debug.assert(!1,"Unknown hover-on category!")}}function v(t){var n=i(t.$target);switch(t.category){case"areas":this._setAreaHover(this._areasInfo[n],!1);break;case"markers":this._setMarkerHover(this._markersInfo[n],!1);break;default:e.utils.debug.assert(!1,"Unknown hover-off category!")}}function m(t){var n=this,r=i(t.$target),s,o;switch(t.category){case"areas":s=n._areaClickCallback,o=n._areasInfo[r].proxy;break;case"markers":s=n._markerClickCallback,o=n._markersInfo[r].proxy;break;default:e.utils.debug.assert(!1,"Unknown click category!")}s&&s.call(o,o)}function g(t){var n=i(t.$target),r;switch(t.category){case"areas":r=this._areasInfo[n];break;case"markers":r=this._markersInfo[n];break;default:e.utils.debug.assert(!1,"Unknown tooltip-check category!")}return this._tooltip.check(r.proxy)}function y(){this._tooltip.show()}function b(e){var t=A(this._renderer);this._tooltip.move({x:e.x-t.left,y:e.y-t.top})}function w(){this._tooltip.hide()}e.viz.map={};var E=window.Number,S=window.String,x=Math.round,T=e.utils.isArray,N=e.utils.isFunction,C=e.utils.isString,k=e.utils.windowResizeCallbacks,L=e.utils.createResizeHandler,A=e.utils.getRootOffset,O=t.ajax,M=t.extend,_=800,D=400,P="none",H="single",B="multiple",j=1,F=2;e.viz.map.Map=e.ui.Component.inherit({_rendererType:e.viz.renderers.Renderer,_init:function(){var e=this;e.callBase(),e._renderer=new e._rendererType,e._renderer.recreateCanvas(1,1),e._renderer.draw(e._element().get(0)),e._themeManager=new e._themeManagerType,e._projection=new e._projectionType,e._tracker=new e._trackerType,e._root=e._renderer.getRoot(),e._root.applySettings({"class":"dxm",stroke:"none",strokeWidth:0,fill:"none",align:"center",cursor:"default",style:{overflow:"hidden"}}),e._background=e._renderer.createRect(0,0,0,0,0,{"class":"dxm-background"}),e._tracker.attachRoot(e._root),e._tracker.setCallbacks(e,{start:l,move:c,end:h,wheel:p,"hover-on":d,"hover-off":v,click:m,"tooltip-check":g,"tooltip-show":y,"tooltip-move":b,"tooltip-hide":w}),e._initAreas(),e._initMarkers(),e._controlBar=new e._controlBarType({container:e._root,renderer:e._renderer,context:e,resetCallback:u,moveCallback:a,zoomCallback:f}),e._tooltip=new e._tooltipType({container:e._root,renderer:e._renderer}),e._legend=new e._legendType({container:e._root,renderer:e._renderer,themeManager:e._themeManager}),e._initResizing(),e._debug_renderer=e._renderer,e._debug_themeManager=e._themeManager,e._debug_projection=e._projection,e._debug_tracker=e._tracker,e._debug_controlBar=e._controlBar,e._debug_tooltip=e._tooltip,e._debug_legend=e._legend},_initAreas:function(){var e=this;e._areasGroup=e._renderer.createGroup({"class":"dxm-areas"}),e._areasCancelLock=0,e._tracker.attachGroup("areas",e._areasGroup)},_initMarkers:function(){var e=this,t=M({},e.option("marker"));e._markersGroup=e._renderer.createGroup({"class":"dxm-markers"}),e._markerShapesGroup=e._renderer.createGroup(),e._markerTextsGroup=e._renderer.createGroup({"class":"dxm-marker-texts"}),e._markerCoversGroup=e._renderer.createGroup({stroke:"none",strokeWidth:0,fill:"#000000",opacity:1e-4}),e._markerShadowFilter=e._renderer.createFilter("shadow").applySettings({id:"marker-shadow-filter",x:"-40%",y:"-40%",width:"180%",height:"200%",color:"#000000",opacity:.2,dx:0,dy:1,blur:1}).append(),e._markersCancelLock=0,e._tracker.attachGroup("markers",e._markersGroup)},_initResizing:function(){var e=this;e._resizeHandler=L(function(){e._resize()}),e._resizeHandler.dispose=function(){return e=null,this},k.add(e._resizeHandler)},_dispose:function(){var e=this;e.callBase(),delete e._root,delete e._background,e._themeManager.dispose()&&delete e._themeManager,e._tracker.detachRoot(),e._disposeAreas(),e._disposeMarkers(),e._controlBar.dispose()&&delete e._controlBar,e._tooltip.dispose()&&delete e._tooltip,e._legend.dispose()&&delete e._legend,e._renderer.dispose(),delete e._renderer,delete e._projection,e._tracker.dispose()&&delete e._tracker,delete e._readyCallback,e._disposeResizing(),e._remoteDataCache=null,e._disposeLoadIndicator(),delete e._debug_renderer,delete e._debug_themeManager,delete e._debug_projection,delete e._debug_tracker,delete e._debug_controlBar,delete e._debug_tooltip,delete e._debug_legend},_disposeAreas:function(){var e=this;e._areasGroup=e._areasInfo=e._mapData=null,e._tracker.detachGroup("areas")},_disposeMarkers:function(){var e=this;e._markersGroup.clear(),e._markerShadowFilter.dispose(),e._markersGroup=e._markerShapesGroup=e._markerTextsGroup=e._markerCoversGroup=e._markerShadowFilter=e._markersDataItems=null,e._tracker.detachGroup("markers")},_disposeResizing:function(){var e=this;k.remove(e._resizeHandler),e._resizeHandler.dispose()&&delete e._resizeHandler},_adjustSize:function(e){var t=this,r=t.option("size")||{},i=r.width>=0?E(r.width):t._element().width(),s=r.height>=0?E(r.height):t._element().height();i===0&&E(r.width)!==0&&(i=_),s===0&&E(r.height)!==0&&(s=D);var o=t._width!==i||t._height!==s;if(o||e)t._renderer.resize(i,s),t._projection.setSize(i,s),t._applyTransform(),t._tooltip.setSize(i,s),t._legend.setSize(i,s),t._background.applySettings({x:0,y:0,width:i,height:s}),t._width=i,t._height=s,t._updateLoadIndicator(n,i,s);return o},_clean:function(){var e=this;e._resizeHandler.stop(),e._themeManager.reset(),e._background.detach(),e._cleanAreas(),e._cleanMarkers(),e._controlBar.clean(),e._legend.clean(),e._tooltip.clean(),e._tracker.clean()},_render:function(){var e=this;e._projection.setBounds(e.option("bounds")).setMaxZoom(e.option("maxZoomFactor")).setZoom(e.option("zoomFactor")).setCenter(e.option("center")),e._adjustSize(!0),e._themeManager.setTheme(e.option("theme")),e._tooltip.setOptions(e._themeManager.getTooltipSettings(e.option("tooltip"))),e._legend.setOptions(e._themeManager.getLegendSettings(e.option("legend"))),e._tracker.setOptions(e._getTrackerSettings()),e._controlBar.setData({minZoom:e._projection.getMinZoom(),maxZoom:e._projection.getMaxZoom()}).setZoom(e._projection.getZoom()).setOptions(e._themeManager.getControlBarSettings(e.option("controlBar"))),N(e._readyCallback=e.option("ready"))||(e._readyCallback=null),e._background.applySettings(e._themeManager.getBackgroundSettings(e.option("background"))),e._background.append(e._root),e._renderAreas(),e._renderMarkers(),e._controlBar.render(),e._legend.render(),e._tooltip.render(),e._tracker.render(),e._contentReady=!0,e._raiseReady()},_getTrackerSettings:function(){var e=this.option("interaction"),t={};return e!==n&&!e?t.enabled=!1:(e=e||{},t.enabled=!0,t.touchEnabled=e.touchEnabled!==n?!!e.touchEnabled:!0,t.wheelEnabled=e.wheelEnabled!==n?!!e.wheelEnabled:!0,t.tooltipEnabled=this._tooltip.enabled()),t},_optionChanged:function(e,t){switch(e){case"zoomFactor":this._updateZoomFactor(t);break;case"center":this._updateCenter(t);break;case"loadingIndicator":this._updateLoadIndicator(this._themeManager.getLoadIndicatorSettings(this.option("loadingIndicator")));break;default:this._invalidate()}},_updateZoomFactor:function(e){var t=this,n=t._projection.getZoom();t._projection.setZoom(e),n!==t._projection.getZoom()&&(t._controlBar.setZoom(t._projection.getZoom()),t._applyTransform(!0))},_updateCenter:function(e){var t=this;t._projection.setCenter(e),t._applyTransform()},_resize:function(){var e=this;e._adjustSize()&&(e._applyTransform(),e._parseAreas(),e._redrawAreas(),e._parseMarkers(),e._redrawMarkers(),e._debug_resized&&e._debug_resized())},_raiseReady:function(){var e=this;e._areasReady&&e._markersReady&&e._contentReady&&(e._areasReady=e._markersReady=e._contentReady=null,e._readyCallback&&e._readyCallback(),e.hideLoadingIndicator(),e._debug_ready&&e._debug_ready())},_loadData:function(e,t){if(C(e)){var n=this._remoteDataCache=this._remoteDataCache||{};n[e]?t(n[e]):O({url:e,dataType:"json",type:"GET",success:function(r,i,s){n[e]=r,t(n[e])},error:function(e,n,r){t([],r)}})}else e?t(e):t([])},_cleanAreas:function(){var e=this;e._areaCustomizeCallback=e._areaClickCallback=e._areaSelectionChangedCallback=e._selectedAreas=null,e._areasGroup.detach(),e._areasGroup.clear();var t=e._areasInfo;if(t){var n=0,r=t.length;for(;n<r;++n)t[n].proxy._dispose();e._areasInfo=null}else++e._areasCancelLock},_renderAreas:function(){var e=this,t=e.option("areaSettings")||{};e._themeManager.initCommonAreaSettings(t),e._areaCustomizeCallback=N(t.customize)?t.customize:null,e._areaClickCallback=N(t.click)?t.click:null,e._areaSelectionChangedCallback=N(t.selectionChanged)?t.selectionChanged:null,e._areaHoverEnabled="hoverEnabled"in t?!!t.hoverEnabled:!0;var n=S(t.selectionMode).toLowerCase();e._areaSelectionMode=n===P||n===H||n===B?n:H,e._selectedAreas=e._areaSelectionMode===B?{}:null,e._areasGroup.append(e._root),e._loadData(e.option("mapData"),function(t){e._areasCancelLock===0?e._createAreas(t):--e._areasCancelLock,e=null})},_parseAreas:function(){var e=this._areasInfo,t=this._mapData,n=0,r=t.length;for(;n<r;++n)(e[n]=e[n]||{}).coordinates=this._parseAreaCoordinates(t[n]||{})},_createAreas:function(e){var t=this,n=t._areasInfo=[],i=e.type==="FeatureCollection",u=i?"properties":"attributes",a=t._mapData=i?e.features:e;t._parseAreaCoordinates=i?o:s,t._parseAreas();var f=t._areasGroup,l=t._renderer,c=t._themeManager,h=t._projection,p=t._areaCustomizeCallback,d,v,m=0,g=n.length,y=[],b,w;f.applySettings(c.getCommonAreaSettings().common);for(;m<g;++m)d=n[m],v=a[m]||{},b=null,d.attributes=v[u]||{},d.options=(p?p.call(v,v):null)||{},w=h.projectArea(d.coordinates),d.styles=c.getAreaSettings(d.options),d.element=b=l.createSimplePath({d:w}),b.applySettings(d.styles.normal),d.index=m,r(b.$element,m),d.options.isSelected&&y.push(d),d.proxy=new t._proxyType(t,d,{type:"area",setSelectionCallback:t._setAreaSelection}),b.append(f);g=t._areaSelectionMode!==P?y.length:0,m=g>0&&t._areaSelectionMode===H?g-1:0;for(;m<g;++m)t._setAreaSelection(y[m],!0,j);t._areasReady=!0,t._raiseReady()},_redrawAreas:function(){var e=this._areasInfo,t=this._projection,n,r=0,i=e.length;for(;r<i;++r)n=e[r],n.element.applySettings({d:t.projectArea(n.coordinates)});this._DEBUG_areasRedrawn&&this._DEBUG_areasRedrawn()},_cleanMarkers:function(){var e=this;e._markerCustomizeCallback=e._markerClickCallback=e._markerSelectionChangedCallback=e._selectedMarkers=null,e._markersGroup.detach(),e._markerShapesGroup.detach(),e._markerTextsGroup.detach(),e._markerCoversGroup.detach(),e._markerShapesGroup.clear(),e._markerTextsGroup.clear(),e._markerCoversGroup.clear();var t=e._markersInfo;if(t){var n=0,r=t.length;for(;n<r;++n)t[n].proxy._dispose();e._markersInfo=null}else++e._markersCancelLock},_renderMarkers:function(){var e=this,t=e.option("markerSettings")||{},n=e.option("markers");e._themeManager.initCommonMarkerSettings(t),e._markerCustomizeCallback=N(t.customize)?t.customize:null,e._markerClickCallback=N(t.click)?t.click:null,e._markerSelectionChangedCallback=N(t.selectionChanged)?t.selectionChanged:null,e._markerHoverEnabled="hoverEnabled"in t?!!t.hoverEnabled:!0;var r=S(t.selectionMode).toLowerCase();e._markerSelectionMode=r===P||r===H||r===B?r:H,e._selectedMarkers=e._markerSelectionMode===B?{}:null,e._markersGroup.append(e._root),e._loadData(n,function(t){e._markersDataItems=t,e._markersCancelLock===0?e._createMarkers():--e._markersCancelLock,e=null})},_parseMarkers:function(){var e=this._markersInfo,t=this._markersDataItems,n=this._projection,r=0,i=t.length;for(;r<i;++r)(e[r]=e[r]||{}).coordinates=n.parsePointData((t[r]||{}).coordinates)},_createMarkers:function(){var e=this,t=e._markersInfo=[];e._parseMarkers();var n=e._markersGroup,i=e._markerShapesGroup,s=e._markerTextsGroup,o=e._markerCoversGroup,u=e._renderer,a=e._themeManager,f=e._projection,l=e._markersDataItems,c=e._markerCustomizeCallback,h,p,d=0,v=t.length,m=[],g,y,b;i.applySettings(a.getCommonMarkerSettings().common),s.applySettings(a.getCommonMarkerSettings().text),a.getCommonMarkerSettings().normal.filter=e._markerShadowFilter.ref;for(;d<v;++d)h=t[d],p=l[d]||{},h.attributes=p.attributes=p.attributes||{},h.options=(c?c.call(p,p):null)||{},h.styles=a.getMarkerSettings(h.options),g=y=b=null,h.location=f.projectPoint(h.coordinates),h.index=d,g=u.createCircle(h.location.x,h.location.y).append(i),g.applySettings({r:h.styles.size}).applySettings(h.styles.normal),r(g.$element,d),h.options.text&&(y=u.createText(h.options.text,h.location.x,h.location.y).append(s),b=u.createRect().append(o),r(b.$element,d)),h.shape=g,h.text=y,h.cover=b,h.options.isSelected&&m.push(h),h.proxy=new e._proxyType(e,h,{type:"marker",setSelectionCallback:e._setMarkerSelection});i.append(n),s.append(n),o.append(n),e._arrangeMarkers(),v=e._markerSelectionMode!==P?m.length:0,d=v>0&&e._markerSelectionMode===H?v-1:0;for(;d<v;++d)e._setMarkerSelection(m[d],!0,j);e._markersReady=!0,e._raiseReady()},_arrangeMarkers:function(){var e=this,t=e._markersInfo,n,r=t.length,i,s=[],o,u,a,f;for(n=0;n<r;++n)i=t[n],o=null,i.text&&(u=i.text.getBBox(),a=i.location.x,f=i.location.y,i.textOffsetX=x(a-u.x+i.styles.selectedSize)+2,i.textOffsetY=x(f-u.y-u.height/2)-1,i.trackerOffsetX=i.textOffsetX+u.x-a-1,i.trackerOffsetY=i.textOffsetY+u.y-f-1,i.trackerWidth=u.width+2,i.trackerHeight=u.height+2,o={text:{x:a+i.textOffsetX,y:f+i.textOffsetY},cover:{x:a+i.trackerOffsetX,y:f+i.trackerOffsetY,width:i.trackerWidth,height:i.trackerHeight}}),s.push(o);e._markerTextsGroup.detach(),e._markerCoversGroup.detach();for(n=0;n<r;++n)i=t[n],i.text&&(o=s[n],i.text.applySettings(o.text),i.cover.applySettings(o.cover));e._markerTextsGroup.append(e._markersGroup),e._markerCoversGroup.append(e._markersGroup)},_redrawMarkers:function(){var e=this._markersInfo,t=this._projection,n,r=0,i=e.length,s,o;for(;r<i;++r)n=e[r],n.location=t.projectPoint(n.coordinates),s=n.location.x,o=n.location.y,n.shape.applySettings({cx:s,cy:o}),n.extra&&n.extra.applySettings({cx:s,cy:o}),n.options.text&&(n.text.applySettings({x:s+n.textOffsetX,y:o+n.textOffsetY}),n.cover.applySettings({x:s+n.trackerOffsetX,y:o+n.trackerOffsetY}));this._DEBUG_markersRedrawn&&this._DEBUG_markersRedrawn()},_applyTransform:function(e){var t=this,n=t._projection.getTransform();t._areasGroup.applySettings(n),t._markersGroup.applySettings(n),e&&(t._redrawAreas(),t._redrawMarkers())},_setAreaHover:function(t,n){if(!this._areaHoverEnabled)return;n&&e.utils.debug.assert(!t.hovered,"Area is already hovered"),!n&&e.utils.debug.assert(t.hovered,"Area is not hovered"),t.hovered=!!n,t.selected||(t.element.applySettings(t.styles[n?"hovered":"normal"]),n?t.element.toForeground():t.element.toBackground())},_setMarkerHover:function(t,n){if(!this._markerHoverEnabled)return;n&&e.utils.debug.assert(!t.hovered,"Marker is already hovered"),!n&&e.utils.debug.assert(t.hovered,"Marker is not hovered"),t.hovered=!!n,t.selected||(t.hovered?(t.extra||(t.extra=this._renderer.createCircle(t.location.x,t.location.y),r(t.extra.$element,t.index)),t.shape.applySettings({r:t.styles.hoveredSize}).applySettings(t.styles.hovered),t.extra.applySettings({r:t.styles.hoveredExtraSize}).applySettings(t.styles.extraHovered),t.extra.insertBefore(t.shape)):(t.shape.applySettings({r:t.styles.size}).applySettings(t.styles.normal),t.extra.detach(),t.extra.dispose(),t.extra=null))},_setAreaSelection:function(t,n,r){n&&e.utils.debug.assert(!t.selected,"Area is already selected"),!n&&e.utils.debug.assert(t.selected,"Area is not selected");var i=this;if(i._areaSelectionMode===P)return;t.selected=!!n,t.element.applySettings(t.styles[n?"selected":t.hovered?"hovered":"normal"]),t.selected?!t.hovered&&t.element.toForeground():!t.hovered&&t.element.toBackground(),!(r&j)&&i._areaSelectionChangedCallback&&i._areaSelectionChangedCallback.call(t.proxy,t.proxy),r&F||(i._areaSelectionMode===H?(t.selected&&i._selectedAreas&&i._setAreaSelection(i._selectedAreas,!1,r|F),i._selectedAreas=t.selected?t:null):t.selected?i._selectedAreas[t.index]=t:delete i._selectedAreas[t.index])},_setMarkerSelection:function(t,n,i){n&&e.utils.debug.assert(!t.selected,"Marker is already selected"),!n&&e.utils.debug.assert(t.selected,"Marker is not selected");var s=this;if(s._markerSelectionMode===P)return;t.selected=!!n,t.selected?(t.extra||(t.extra=s._renderer.createCircle(t.location.x,t.location.y),r(t.extra.$element,t.index)),t.shape.applySettings({r:t.styles.selectedSize}).applySettings(t.styles.selected),t.extra.applySettings({r:t.styles.selectedExtraSize}).applySettings(t.styles.extraSelected),t.extra.insertBefore(t.shape)):t.hovered?(t.shape.applySettings({r:t.styles.hoveredSize}).applySettings(t.styles.hovered),t.extra.applySettings({r:t.styles.hoveredExtraSize}).applySettings(t.styles.extraHovered)):(t.shape.applySettings({r:t.styles.size}).applySettings(t.styles.normal),t.extra.detach(),t.extra.dispose(),t.extra=null),!(i&j)&&s._markerSelectionChangedCallback&&s._markerSelectionChangedCallback.call(t.proxy,t.proxy),i&F||(s._markerSelectionMode===H?(t.selected&&s._selectedMarkers&&s._setMarkerSelection(s._selectedMarkers,!1,i|F),s._selectedMarkers=t.selected?t:null):t.selected?s._selectedMarkers[t.index]=t:delete s._selectedMarkers[t.index])},_refresh:function(){var e=this,t=e.callBase;e._endLoading(function(){t.call(e)})},render:function(e){return e==="resize"?this._resize():this._refresh(),this},getAreas:function(){var e=this._areasInfo,t=0,n=e.length,r=[];for(;t<n;++t)r.push(e[t].proxy);return r},getMarkers:function(){var e=this._markersInfo,t=0,n=e.length,r=[];for(;t<n;++t)r.push(e[t].proxy);return r},clearAreaSelection:function(){var e=this,t=e._selectedAreas;if(e._areaSelectionMode===H)t&&e._setAreaSelection(t,!1);else if(e._areaSelectionMode===B){var n;for(n in t)e._setAreaSelection(t[n],!1)}return e},clearMarkerSelection:function(){var e=this,t=e._selectedMarkers;if(e._markerSelectionMode===H)t&&e._setMarkerSelection(t,!1);else if(e._markerSelectionMode===B){var n;for(n in t)e._setMarkerSelection(t[n],!1)}return e},clearSelection:function(){return this.clearAreaSelection().clearMarkerSelection()}}).include(e.viz.core.widgetMarkupMixin).include(e.viz.core.loadIndicatorMixin.base).redefine(e.viz.core.loadIndicatorMixin.map),e.viz.map._utils={getElementData:i,setElementData:r},e.ui.registerComponent("dxVectorMap",e.viz.map.Map),e.viz.map.sources={},e.viz.map._tests={}})(DevExpress,jQuery),function(e,t){var n=Number,r=Math.tan,i=Math.atan,s=Math.exp,o=Math.round,u=Math.log,a=e.utils.isArray,f=e.viz.renderers.buildPath,l=Math.PI*2,c=Math.PI/2,h=Math.PI/4,p=Math.PI/180,d=1,v=-180,m=180,g=-90,y=90,b=1,w=32,E=e.Class.inherit({setBounds:function(e){e=e||{};var t=this;return t._minlon=e.minLon>=v?n(e.minLon):v,t._maxlon=e.maxLon<=m?n(e.maxLon):m,t._minlat=e.minLat>=g?n(e.minLat):g,t._maxlat=e.maxLat<=y?n(e.maxLat):y,t},setSize:function(e,t){var n=this;return n._width=e,n._height=t,n._setupBounds(),n._adjustZoom(),n._adjustCenter(),n},_setupBounds:function(){var e=this,t=e._width,n=e._height,r=n/t;r=r<=d?n:t,e._radius=r/l,e._x0=t/2,e._y0=n/2,e._miny=e._y0-r/2,e._maxy=e._y0+r/2;if(e._maxlon-e._minlon>=360&&e._maxlat-e._minlat>=180)return;var i=e._project(e._minlon,e._maxlat),s=e._project(e._maxlon,e._minlat),o=t/(s.x-i.x),u=n/(s.y-i.y),a=o;o<u?(a=o,o=(i.y+s.y)/2,u=n/a/2,i.y=o-u,s.y=o+u):o>u&&(a=u,u=(i.x+s.x)/2,o=t/a/2,i.x=u-o,s.x=u+o),e._x0=-i.x*a+t*a/2,e._y0=-i.y*a+n*a/2,e._radius*=a,r*=a,e._miny=e._y0-r/2,e._maxy=e._y0+r/2},_project:function(e,t,n){var i=this,s=e*p,o,a=i._radius*s+i._x0,f;return t<=g?f=i._maxy:t>=y?f=i._miny:(o=t*p,f=i._radius*-u(r(h+o/2))+i._y0),n||(f<=i._miny&&(f=i._miny),f>=i._maxy&&(f=i._maxy)),{x:a,y:f}},_invproject:function(e,t){var n=this,r=(e-n._x0)/n._radius,o=2*i(s((n._y0-t)/n._radius))-c;return{lat:o/p,lon:r/p}},parseAreaData:function(e){var t=this,n=0,r=a(e)?e.length:0,i,s,o,u,f,l=[];for(;n<r;++n){i=e[n],s=0,o=a(i)?i.length:0;if(o){u=[];for(;s<o;)f=t._project(i[s++],i[s++]),u.push(f.x,f.y);l.push(u)}}return l},parseAreaGeoJsonData:function(e){var t=this,n=0,r=e?e.length:0,i,s,o,u,a=[],f;for(;n<r;++n){i=e[n],u=[];for(s=0,o=i?i.length:0;s<o;++s)f=i[s],f=t._project(f[0],f[1]),u.push(f.x,f.y);a.push(u)}return a},parsePointData:function(e){return e?this._project(e[0],e[1]):{}},projectArea:function(e){var t=0,n=e.length,r,i,s,o=[],u,a=this._zoom,l=this._xzoom,c=this._yzoom;for(;t<n;++t){r=e[t],u=[];for(i=0,s=r.length;i<s;i+=2)u.push(a*r[i]-l,a*r[i+1]-c);o.push(f(u))}return o.join(" ")},projectPoint:function(e){return{x:o(this._zoom*e.x-this._xzoom),y:o(this._zoom*e.y-this._yzoom)}},_adjustZoom:function(){var e=this;e._xzoom=e._width*(e._zoom-1)/2,e._yzoom=e._height*(e._zoom-1)/2},_adjustCenter:function(){var e=this,t=e._project(e._loncenter,e._latcenter,!0);e._dxcenter=(e._x0-(e._xcenter=t.x))*e._zoom,e._dycenter=(e._y0-(e._ycenter=t.y))*e._zoom},getZoom:function(){return this._zoom},setZoom:function(e){var t=this,r=n(e);return r<t._minZoom&&(r=t._minZoom),r>t._maxZoom&&(r=t._maxZoom),t._zoom=t._minZoom<=r&&r<=t._maxZoom?r:b,t._adjustZoom(),t._adjustCenter(),t},setMaxZoom:function(e){return this._minZoom=b,this._maxZoom=e>=b?n(e):w,this},getMinZoom:function(){return 1},getMaxZoom:function(){return this._maxZoom},setCenter:function(e){return e=e||{},this._latcenter=n(e.lat)||0,this._loncenter=n(e.lon)||0,this._adjustCenter(),this},moveCenter:function(e,t){var n=this,r=n._xcenter+e/n._zoom,i=n._ycenter+t/n._zoom,s=n._invproject(r,i);return n.setCenter(s)},getTransform:function(){return{translateX:this._dxcenter,translateY:this._dycenter}}});e.viz.map._tests.Projection=E,e.viz.map.Map.include({_projectionType:E})}(DevExpress),function(e,t){function n(e){delete e._owner,e.update=function(){},e.finish=function(){}}function r(e,t){this._owner=e,this._x=t.x,this._y=t.y}function i(e,t){this._owner=e,this._command=t.data}function s(e,t){function n(){e._move(s,o),r=f(n,i)}this._command=t.data;var r=null,i=100,s=0,o=0;switch(this._command){case g:o=-10;break;case y:s=10;break;case b:o=10;break;case w:s=-10}this._stop=function(){return l(r),this._stop=e=n=null,this},t=null,n()}function o(e,t){function n(){e._adjustZoom(e._zoomFactor+s),r=f(n,i)}this._owner=e,this._command=t.data;var r=null,i=150,s=this._command===E?e._zoomFactorStep:-e._zoomFactorStep;this._stop=function(){return l(r),this._stop=e=n=null,this},t=null,n()}function u(e,t){this._owner=e,this._pos=t.y}var a=e.viz.renderers.buildPath,f=setTimeout,l=clearTimeout,c=Math.round,h=Math.pow,p=Math.log,d=e.viz.map._utils.setElementData,v=Math.LN2,m="command-reset",g="command-move-up",y="command-move-right",b="command-move-down",w="command-move-left",E="command-zoom-in",S="command-zoom-out",x="command-zoom-drag",T={};T[m]=i,T[g]=T[y]=T[b]=T[w]=s,T[E]=T[S]=o,T[x]=u;var N=e.Class.inherit({ctor:function(e){var t=this;t._container=e.container,t._createElements(e.renderer);var n=e.context,r=e.resetCallback,i=e.moveCallback,s=e.zoomCallback;t._reset=function(){r.call(n)},t._move=function(e,t){i.call(n,e,t)},t._zoom=function(e){s.call(n,e)},t._dispose=function(){delete this._reset,delete this._move,delete this._zoom,delete this._dispose,n=r=i=s=null},e=null},_createElements:function(e){var t=this._root=e.createGroup({"class":"dxm-control-bar"}),n=e.createGroup({"class":"dxm-control-buttons"}).append(t),r=e.createGroup({stroke:"none",strokeWidth:0,fill:"#000000",opacity:1e-4,cursor:"pointer"}).append(t),i={bigCircleSize:58,smallCircleSize:28,buttonSize:10,arrowButtonOffset:20,incdecButtonSize:11,incButtonOffset:66,decButtonOffset:227,sliderLineStartOffset:88.5,sliderLineEndOffset:205.5,sliderLength:20,sliderWidth:8,trackerGap:4};this._buttonsGroup=n,this._createButtons(e,n,i),this._createTrackers(e,r,i),t.applySettings({translateX:50.5,translateY:50.5})},_createButtons:function(e,t,n){var r=n.buttonSize/2,i=n.arrowButtonOffset-r,s=n.arrowButtonOffset,o=n.incdecButtonSize/2;e.createCircle(0,0,n.bigCircleSize/2).append(t),e.createCircle(0,0,r).append(t),e.createPath([-r,-i,0,-s,r,-i]).append(t),e.createPath([i,-r,s,0,i,r]).append(t),e.createPath([r,i,0,s,-r,i]).append(t),e.createPath([-i,r,-s,0,-i,-r]).append(t),e.createCircle(0,n.incButtonOffset,n.smallCircleSize/2).append(t),e.createSimplePath({d:a([-o,n.incButtonOffset,o,n.incButtonOffset])+" "+a([0,n.incButtonOffset-o,0,n.incButtonOffset+o])}).append(t),e.createCircle(0,n.decButtonOffset,n.smallCircleSize/2).append(t),e.createSimplePath({d:a([-o,n.decButtonOffset,o,n.decButtonOffset])}).append(t),e.createSimplePath({d:a([0,n.sliderLineStartOffset,0,n.sliderLineEndOffset])}).append(t),this._zoomDrag=e.createRect(-n.sliderLength/2,n.sliderLineEndOffset-n.sliderWidth/2,n.sliderLength,n.sliderWidth).append(t),this._sliderLineLength=n.sliderLineEndOffset-n.sliderLineStartOffset},_createTrackers:function(e,t,n){var r=c((n.arrowButtonOffset-n.trackerGap)/2),i=n.arrowButtonOffset-r,s=c(h(n.bigCircleSize*n.bigCircleSize/4-r*r,.5)),o=s-i,u;u=e.createRect(-r,-r,r*2,r*2).append(t),d(u.$element,m),u=e.createRect(-r,-s,r*2,o).append(t),d(u.$element,g),u=e.createRect(i,-r,o,r*2).append(t),d(u.$element,y),u=e.createRect(-r,i,r*2,o).append(t),d(u.$element,b),u=e.createRect(-s,-r,o,r*2).append(t),d(u.$element,w),u=e.createCircle(0,n.incButtonOffset,n.smallCircleSize/2).append(t),d(u.$element,E),u=e.createCircle(0,n.decButtonOffset,n.smallCircleSize/2).append(t),d(u.$element,S),u=this._zoomDragCover=e.createRect(-n.sliderLength/2,n.sliderLineEndOffset-n.sliderWidth/2,n.sliderLength,n.sliderWidth).append(t),d(u.$element,x)},dispose:function(){var e=this;return delete e._container,e._dispose(),e._root.clear(),delete e._root,delete e._buttonsGroup,delete e._zoomDrag,delete e._zoomDragCover,e},setData:function(e){var t=this;return t._minZoomFactor=p(e.minZoom)/v,t._maxZoomFactor=p(e.maxZoom)/v,t._zoomCoeff=t._sliderLineLength/(t._maxZoomFactor-t._minZoomFactor),t._zoomFactorStep=(t._maxZoomFactor-t._minZoomFactor)/10,t},setZoom:function(e){return this._adjustZoom(p(e)/v),this},setOptions:function(e){return e=e||{},this._enabled=e.enabled!==t?!!e.enabled:!0,this._buttonsGroup.applySettings(e.shape),this},clean:function(){return this._enabled&&this._root.detach(),this},render:function(){return this._enabled&&this._root.append(this._container),this},_adjustZoom:function(e){var t=this,n=e;n<=t._maxZoomFactor||(n=t._maxZoomFactor),n>=t._minZoomFactor||(n=t._minZoomFactor),t._zoomFactor=n;var r=-n*t._zoomCoeff;t._zoomDrag.applySettings({translateY:r}),t._zoomDragCover.applySettings({translateY:r})},_applyZoom:function(){this._zoom(h(2,this._zoomFactor))},processStart:function(e){var t=T[e.data]||r;return this._command=new t(this,e),this},processMove:function(e){return this._command.update(e),this},processEnd:function(e){return this._command.finish(e),this},processWheel:function(e){var t=this;return t._adjustZoom(t._zoomFactor+e.delta*t._zoomFactorStep),t._applyZoom(),this}});r.prototype.update=function(e){var t=this;t._owner._move(t._x-e.x,t._y-e.y),t._x=e.x,t._y=e.y},r.prototype.finish=function(){n(this)},i.prototype.update=function(e){e.data!==this._command&&n(this)},i.prototype.finish=function(){this._owner._reset(),this._owner._adjustZoom(this._owner._minZoomFactor),n(this)},s.prototype.update=function(e){this._command!==e.data&&this.finish()},s.prototype.finish=function(){n(this._stop())},o.prototype.update=function(e){this._command!==e.data&&this.finish()},o.prototype.finish=function(){this._owner._applyZoom(),n(this._stop())},u.prototype.update=function(e){this._owner._adjustZoom(this._owner._zoomFactor+(this._pos-e.y)/this._owner._zoomCoeff),this._pos=e.y},u.prototype.finish=function(){this._owner._applyZoom(),n(this)},e.viz.map._tests.ControlBar=N,e.viz.map.Map.include({_controlBarType:N})}(DevExpress),function(e,t,n){var r=Math.max,i=Math.min,s=e.Class.inherit({ctor:function(e){var t=this;t._container=e.container,t._renderer=e.renderer,t._themeManager=e.themeManager,t._root=t._renderer.createGroup({"class":"dxm-legend"}),t._background=t._renderer.createRect(0,0,0,0,0,{"class":"dxm-legend-background"}).append(t._root),t._itemsGroup=t._renderer.createGroup().append(t._root),t._clip=t._renderer.createClipRect().append(),t._itemsGroup.applySettings({clipId:t._clip.id})},dispose:function(){var e=this;return e._root.clear(),e._clip.dispose(),e._root=e._background=e._itemsGroup=e._clip=e._container=e._renderer=null,e},setSize:function(e,t){var n=this;return n._containerWidth=e,n._containerHeight=t,n._hasItems&&n._adjustLocation(),n},setOptions:function(e){e=e||{};var t=this;return t._items=e.items&&e.items.length>0?e.items:[],t._enabled=(e.enabled!==n?!!e.enabled:!0)&&t._items.length>0,t._metrics=e.metrics,t._backgroundSettings=e.background,t._textSettings=e.text,t},_createItems:function(){var e=this,t=e._metrics,n=e._renderer,s=e._themeManager,o=e._textSettings,u=e._itemsGroup,a=e._items,f,l=a.length,c,h=[],p,d=t.horizontalPadding,v=t.verticalPadding,m=t.itemSize,g=t.itemSpacing,y=t.textIndent,b,w;for(f=0;f<l;++f)h.push(n.createText(a[f].text,0,0,o).append(u));for(f=0;f<l;++f)p=h[f].getBBox(),b=r(m,p.height),w=v+b/2,n.createRect(d,w-m/2,m,m,0,s.getLegendItemSettings(a[f])).append(u),h[f].applySettings({x:d+m+y,y:w-p.y-p.height/2}),v+=b+g;e._totalWidth=i(e._metrics.maxWidth,u.getBBox().width+2*t.horizontalPadding),e._totalHeight=i(e._metrics.maxHeight,v+t.verticalPadding-g),e._background.applySettings({x:0,y:0,width:e._totalWidth,height:e._totalHeight}),e._clip.updateRectangle({x:0,y:0,width:e._totalWidth,height:e._totalHeight}),e._adjustLocation(),e._hasItems=!0},_adjustLocation:function(){var e=this;e._root.applySettings({translateX:e._containerWidth-e._totalWidth-e._metrics.horizontalIndent,translateY:e._containerHeight-e._totalHeight-e._metrics.verticalIndent})},clean:function(){var e=this;return e._enabled&&(e._root.detach(),e._itemsGroup.clear(),e._hasItems=null),e},render:function(){var e=this;return e._enabled&&(e._background.applySettings(e._backgroundSettings),e._root.append(e._container),e._createItems()),e}});e.viz.map._tests.Legend=s,e.viz.map.Map.include({_legendType:s})}(DevExpress,jQuery),function(e,t,n){function r(){var e=window,t=e.navigator.pointerEnabled,n=e.navigator.msPointerEnabled,r="ontouchstart"in e;switch(arguments[0]){case"pointer":t=!0,n=r=!1;break;case"MSPointer":n=!0,t=r=!1;break;case"touch":r=!0,t=n=!1;break;case"mouse":t=n=r=!1}d.start=s(t?"pointerdown":n?"MSPointerDown":r?"touchstart mousedown":"mousedown",p),d.move=s(t?"pointermove":n?"MSPointerMove":r?"touchmove mousemove":"mousemove",p),d.end=s(t?"pointerup":n?"MSPointerUp":r?"touchend mouseup":"mouseup",p),d.over=s(t?"pointerover":n?"MSPointerOver":"mouseover",p),d.out=s(t?"pointerout":n?"MSPointerOut":"mouseout",p),d.wheel=s("mousewheel DOMMouseScroll",p)}function i(e){var t=e.originalEvent,n=t.changedTouches?t.changedTouches[0]:{};return{x:e.pageX||t.pageX||n.pageX,y:e.pageY||t.pageY||n.pageY}}var s=e.ui.events.addNamespace,o=function(e){var t=e.originalEvent.type,n=e.originalEvent.pointerType;return/^touch/.test(t)||/^MSPointer/.test(t)&&n!==4||/^pointer/.test(t)&&n!=="mouse"},u=Math.abs,a=t.now,f=setTimeout,l=clearTimeout,c=e.viz.map._utils.getElementData,h=t(document),p="dxVectorMap",d={},v=300,m=300,g=400,y=300;r();var b="start",w="move",E="end",S="wheel",x="hover-on",T="hover-off",N="click",C="tooltip-check",k="tooltip-show",L="tooltip-hide",A="tooltip-move",O=e.Class.inherit({ctor:function(){var e=this;e._groups={},e._createCallbacks(),e._resetState()},dispose:function(){var n=this;return e.utils.debug.assert(!n._root,"Undetached root!"),e.utils.debug.assert(t.map(n._groups,function(e){return e}).length===0,"Undetached groups!"),n._dispose(),n._groups=n._context=n._callbacks=null,n},_resetState:function(){var e=this;l(e._tooltip_showTimeout),l(e._tooltip_hideTimeout),e._touchLock=e._moving=e._click_time=e._hover_event=e._tooltip_target=e._tooltip_showTimeout=e._tooltip_hideTimeout=null},_createCallbacks:function(){var e=this;e._rootEvents={},e._rootEvents[d.start]=function(t){var n=o(t);if(n&&!e._touchEnabled)return;t.preventDefault(),e._touchLock=n,e._processStart(t),n&&e._processTooltipRootTouchStart(t)},e._documentEventsMoveEnd={},e._documentEventsMoveEnd[d.move]=function(t){e._touchLock===o(t)&&e._processMove(t)},e._documentEventsMoveEnd[d.end]=function(t){e._touchLock===o(t)&&(e._touchLock=null,e._processEnd(t))},e._rootEvents[d.wheel]=function(t){e._wheelEnabled&&(t.preventDefault(),e._processWheel(t))},e._groupEvents={},e._groupEvents[d.start]=function(t){var n=o(t);if(n&&!e._touchEnabled)return;e._processClickStart(t),n&&e._processTooltipTouchStart(t)},e._groupClickEventsEnd={},e._groupClickEventsEnd[d.end]=function(t){e._processClickEnd(t)},e._groupEvents[d.over]=function(t){!e._touchLock&&!o(t)&&(e._processHoverOn(t),e._processTooltipMouseOver(t))},e._groupEvents[d.out]=function(t){!e._touchLock&&!o(t)&&(e._processHoverOff(t),e._processTooltipMouseOut(t))},e._groupTooltipEventsMouseMove={},e._groupTooltipEventsMouseMove[d.move]=function(t){e._processTooltipMouseMove(t)},e._groupTooltipEventsTouchMoveEnd={},e._groupTooltipEventsTouchMoveEnd[d.move]=function(t){e._processTooltipTouchMove(t)},e._groupTooltipEventsTouchMoveEnd[d.end]=function(t){e._processTooltipTouchEnd(t)},e._showTooltipCallback=function(){e._showTooltipCore()},e._hideTooltipCallback=function(){e._hideTooltipCore()},e._dispose=function(){var e=this;e=e._dispose=e._rootEvents=e._documentEventsMoveEnd=e._groupEvents=e._groupClickEventsEnd=e._groupTooltipEventsMouseMove=e._groupTooltipEventsTouchMoveEnd=e._showTooltipCallback=e._hideTooltipCallback=null}},_processStart:function(e){var n=this,r=i(e);n._start_x=n._x=r.x,n._start_y=n._y=r.y,n._callbacks[b].call(n._context,{$target:t(e.target),x:n._x,y:n._y}),h.off(n._documentEventsMoveEnd).on(n._documentEventsMoveEnd,e.data)},_processMove:function(e){var n=this,r=i(e);if(n._moving||u(n._start_x-r.x)>3||u(n._start_y-r.y)>3)n._moving=!0,n._x=r.x,n._y=r.y,n._callbacks[w].call(n._context,{$target:t(e.target),x:n._x,y:n._y})},_processEnd:function(e){var n=this;h.off(n._documentEventsMoveEnd),n._callbacks[E].call(n._context,{$target:t(e.target),x:n._x,y:n._y}),n._moving=n._start_x=n._start_y=n._x=n._y=null},_processWheel:function(e){var n=e.originalEvent.wheelDelta/120||e.originalEvent.detail/-3||0;this._callbacks[S].call(this._context,{$target:t(e.target),delta:n})},_processHoverOn:function(e){var n=this;if(n._hover_event&&n._hover_event.target===e.target)return;n._hover_event&&n._callbacks[T].call(n._context,{$target:t(n._hover_event.target),category:n._hover_event.data.category}),n._hover_event=e,n._callbacks[x].call(n._context,{$target:t(n._hover_event.target),category:n._hover_event.data.category})},_processHoverOff:function(e){var r=this;if(c(t(e.target))===n)return;r._hover_event&&r._callbacks[T].call(r._context,{$target:t(r._hover_event.target),category:r._hover_event.data.category}),r._hover_event=null},_processClickStart:function(e){this._click_time=a(),e.data.container.off(this._groupClickEventsEnd).on(this._groupClickEventsEnd,e.data)},_processClickEnd:function(e){var n=this;n._click_time&&!n._moving&&a()-n._click_time<=500&&n._callbacks[N].call(n._context,{$target:t(e.target),category:e.data.category}),n._click_time=null,e.data.container.off(n._groupClickEventsEnd)},_processTooltipMouseOver:function(e){var t=this;if(t._tooltipEnabled&&t._isTooltipAvailable(e)){var n=i(e);t._tooltip_x=n.x,t._tooltip_y=n.y,e.data.container.off(t._groupTooltipEventsMouseMove).on(t._groupTooltipEventsMouseMove,e.data),t._showTooltip(e,t._tooltip_target?null:v)}},_processTooltipMouseMove:function(e){var t=this;if(t._isTooltipAvailable(e))if(t._tooltip_target)t._showTooltip(e);else{var n=i(e);(u(t._tooltip_x-n.x)>3||u(t._tooltip_y-n.y)>3)&&t._showTooltip(e,v)}else e.data.container.off(t._groupTooltipEventsMouseMove),t._hideTooltip(m)},_processTooltipMouseOut:function(e){this._tooltipEnabled&&(e.data.container.off(this._groupTooltipEventsMouseMove),this._hideTooltip(m))},_processTooltipTouchStart:function(e){var t=this;t._tooltipEnabled&&t._isTooltipAvailable(e)&&(t._showTooltip(e,g),e.data.container.off(t._groupTooltipEventsTouchMoveEnd).on(t._groupTooltipEventsTouchMoveEnd,e.data),t._skipTouchStart=!0)},_processTooltipRootTouchStart:function(e){this._skipTouchStart||this._hideTooltip(y),this._skipTouchStart=null},_processTooltipTouchMove:function(e){this._moving&&(this._hideTooltip(),e.data.container.off(this._groupTooltipEventsTouchMoveEnd))},_processTooltipTouchEnd:function(e){this._tooltip_showTimeout&&this._hideTooltip(y),e.data.container.off(this._groupTooltipEventsTouchMoveEnd)},_isTooltipAvailable:function(e){var n=this,r=!n._moving;return r&&(!n._tooltip_event||n._tooltip_event.target!==e.target)&&(r=n._callbacks[C].call(n._context,{$target:t(e.target),category:e.data.category})),r},_showTooltip:function(e,t){var n=this;l(n._tooltip_hideTimeout),n._tooltip_hideTimeout=null,l(n._tooltip_showTimeout),n._tooltip_event=e,t>0?n._tooltip_showTimeout=f(n._showTooltipCallback,t):n._showTooltipCallback()},_hideTooltip:function(e){var t=this;l(t._tooltip_showTimeout),t._tooltip_showTimeout=null,e>0?t._tooltip_hideTimeout=t._tooltip_hideTimeout||f(t._hideTooltipCallback,e):(l(t._tooltip_hideTimeout),t._hideTooltipCallback())},_showTooltipCore:function(){var e=this,n=e._tooltip_event,r=i(n);e._tooltip_target||e._callbacks[k].call(e._context,{$target:t(n.target),category:n.data.category}),e._tooltip_target=n.target,e._callbacks[A].call(e._context,{$target:t(e._tooltip_target),category:n.data.category,x:r.x,y:r.y}),e._tooltip_showTimeout=null},_hideTooltipCore:function(){var e=this,n=e._tooltip_event;e._tooltip_target&&e._callbacks[L].call(e._context,{$target:t(e._tooltip_target),category:n.data.category}),e._tooltip_target=e._tooltip_hideTimeout=e._tooltip_event=null},attachRoot:function(t){return e.utils.debug.assert(!this._root,"Root is already attached!"),this._root=t,this},detachRoot:function(){return e.utils.debug.assert(this._root,"Root is not attached!"),this._root=null,this},attachGroup:function(t,n){return e.utils.debug.assert(!this._groups[t],"Group category is already attached!"),this._groups[t]=n,this},detachGroup:function(t){return e.utils.debug.assert(this._groups[t],"Group category is not attached!"),this._groups[t]=null,this},setCallbacks:function(e,t){return this._context=e,this._callbacks=t,this},setOptions:function(e){e=e||{};var t=this;return t._enabled=e.enabled,t._touchEnabled=e.touchEnabled,t._wheelEnabled=e.wheelEnabled,t._tooltipEnabled=e.tooltipEnabled,t},render:function(){var e=this;if(!e._enabled)return e;e._touchEnabled&&(e._root.on(s("MSHoldVisual",p),function(e){e.preventDefault()}).on(s("contextmenu",p),function(e){o(e)&&e.preventDefault()}),e._root.applySettings({style:{"touch-action":"none","-ms-touch-action":"none","-webkit-user-select":"none"}})),e._root.on(e._rootEvents,{container:e._root});var t,n;for(t in e._groups)n=e._groups[t],n&&n.on(e._groupEvents,{category:t,container:n});return e},clean:function(){var e=this;if(!e._enabled)return e;e._touchEnabled&&e._root.applySettings({style:{"touch-action":"","-ms-touch-action":"","-webkit-user-select":""}}),e._root.off("."+p),h.off(e._documentEventsMoveEnd);var t,n;for(t in e._groups)n=e._groups[t],n&&n.off("."+p);return e._resetState(),e}});e.viz.map._tests.Tracker=O,e.viz.map._tests._DEBUG_forceEventMode=function(e){r(e)},e.viz.map.Map.include({_trackerType:O})}(DevExpress,jQuery),function(e,t){var n=e.utils.isFunction,r=String,i=e.Class.inherit({ctor:function(t){var n=this;n._container=t.container,n._root=t.renderer.createGroup({"class":"dxm-tooltip"}),n._renderer=t.renderer,n._inner=new e.viz.charts.Tooltip({renderer:t.renderer,arrowLength:10,paddingLeftRight:12,paddingTopBottom:10},n._root),n._inner.draw(),n._inner.text.applySettings({"class":"dxm-tooltip-text"}),n._enabled=!1},dispose:function(){var e=this;return e._inner.dispose(),delete e._inner,delete e._container,e._root.clear(),delete e._root,e},enabled:function(){return this._enabled},setSize:function(e,t){return this._inner.update({canvasWidth:e,canvasHeight:t}),this},setOptions:function(e){var t=this;return e=e||{},t._enabled=!!e.enabled,t._inner.update({color:e.color||null}),t._inner.cloud.applySettings(e.shape),t._inner.text.applySettings(e.text),t._customizeText=n(e.customizeText)?e.customizeText:null,t},clean:function(){return this._root.detach(),this._inner.hide(),this},render:function(){return this._root.append(this._container),this},check:function(e){if(this._enabled){var n=this._customizeText?this._customizeText.call(e,e):null;return!!(this._text=n!==null&&n!==t?r(n):"")}return!1},show:function(){return this._inner.show(),this},hide:function(){return this._inner.hide(),this},move:function(e){return this._inner.move(e.x,e.y,12,this._text),this}});e.viz.map._tests.Tooltip=i,e.viz.map.Map.include({_tooltipType:i})}(DevExpress),function(e,t){function n(e,n,r){var i=this;i._debug_map=e,i._debug_info=n,i.selected=function(i){var s=!!n.selected;return i!==t?(!!i!==s&&r.setSelectionCallback.call(e,n,!s),this):s},i.type=r.type;var s=n.attributes;i.attribute=function(e){return s[e]};var o=n.options;i.option=function(e,t){return o[e]},i._dispose=function(){e=n=s=o=null,i._debug_map=i._debug_info=null}}e.viz.map._tests.ElementProxy=n,e.viz.map.Map.include({_proxyType:n})}(DevExpress),function(e,t,n){var r=Number,i=t.extend,s=e.viz.core.GradientPalette,o=e.viz.core.BaseThemeManager.inherit({_themeSection:"map",_initializeTheme:function(){var e=this;e._initializeFont(e._theme.marker.font),e._initializeFont(e._theme.tooltip.font),e._initializeFont(e._theme.legend.font),e._initializeFont(e._theme.loadingIndicator.font)},reset:function(){return this._commonAreaSettings=this._commonMarkerSettings=this._palette=null,this},getBackgroundSettings:function(e){var t=this._theme.background,n=i({},t,e);return{strokeWidth:t.borderWidth,stroke:n.borderColor,fill:n.color}},initCommonAreaSettings:function(e){var t=this._theme.area,n=i({},t,e);return this._commonAreaSettings={common:{strokeWidth:t.borderWidth,stroke:n.borderColor,fill:n.color},normal:{"class":null,strokeWidth:null,stroke:null,fill:null},hovered:{"class":n.hoveredClass,strokeWidth:t.hoveredBorderWidth,stroke:n.hoveredBorderColor,fill:n.hoveredColor},selected:{"class":n.selectedClass,strokeWidth:t.selectedBorderWidth,stroke:n.selectedBorderColor,fill:n.selectedColor}},this._palette=new s(n.palette,n.paletteSize),this._DEBUG_palette=this._palette,this},getCommonAreaSettings:function(){return this._commonAreaSettings},getAreaSettings:function(e){e=e||{},e.color===n&&e.paletteIndex>=0&&(e.color=this._palette.getColor(e.paletteIndex)||n);var t={"class":e["class"],fill:e.color,stroke:e.borderColor};return{normal:i({},this._commonAreaSettings.normal,t),hovered:i({},this._commonAreaSettings.hovered,t,{"class":e.hoveredClass,fill:e.hoveredColor,stroke:e.hoveredBorderColor}),selected:i({},this._commonAreaSettings.selected,t,{"class":e.selectedClass,fill:e.selectedColor,stroke:e.selectedBorderColor})}},initCommonMarkerSettings:function(e){var t=this._theme.marker,n=i({},t,e);return this._commonMarkerSettings={size:r(n.size),selectedStep:r(n.selectedStep),extraStep:r(n.extraStep),text:{strokeWidth:0,stroke:"none",fill:"none",font:i({},t.font,n.font)},normal:{"class":n["class"],strokeWidth:t.borderWidth,stroke:n.borderColor,fill:n.color},hovered:{"class":n.hoveredClass,strokeWidth:t.borderWidth,stroke:n.hoveredBorderColor||n.borderColor,fill:n.hoveredColor||n.color},selected:{"class":n.selectedClass,strokeWidth:t.borderWidth,stroke:n.selectedBorderColor||n.borderColor,fill:n.selectedColor||n.color},extraHovered:{strokeWidth:0,stroke:"none",fill:t.extraColor,opacity:t.extraOpacity},extraSelected:{strokeWidth:0,stroke:"none",fill:t.extraColor,opacity:t.extraOpacity}},this},getCommonMarkerSettings:function(){return this._commonMarkerSettings},getMarkerSettings:function(e){e=e||{};var t={"class":e["class"],fill:e.color,stroke:e.borderColor},n=this._commonMarkerSettings,s={normal:i({},n.normal,t),hovered:i({},n.hovered,t,{"class":e.hoveredClass,fill:e.hoveredColor,stroke:e.hoveredBorderColor}),selected:i({},n.selected,t,{"class":e.selectedClass,fill:e.selectedColor,stroke:e.selectedBorderColor}),extraHovered:n.extraHovered,extraSelected:n.extraSelected};return s.selectedSize=s.hoveredSize=s.size=e.size>0?r(e.size):n.size,s.selectedSize+=e.selectedStep>0?e.selectedStep:n.selectedStep,s.hoveredExtraSize=s.hoveredSize+(e.extraStep>0?e.extraStep:n.extraStep),s.selectedExtraSize=s.selectedSize+(e.extraStep>0?e.extraStep:n.extraStep),s},getControlBarSettings:function(e){var t=this._theme.controlBar,n=i({},t,e);return i({},e,{shape:{strokeWidth:t.borderWidth,stroke:n.borderColor,fill:n.color}})},getLoadIndicatorSettings:function(e){var t=this._theme.loadingIndicator;return i(!0,{},t,e)},getTooltipSettings:function(e){var t=this._theme.tooltip,n=i({},t,e);return i({},e,{shape:{strokeWidth:t.borderWidth,stroke:n.borderColor,fill:n.color},text:{strokeWidth:0,stroke:"none",fill:"none",font:i({},t.font,n.font)}})},getLegendSettings:function(e){var t=this._theme.legend,n=i({},t,e);return i({},e,{background:{strokeWidth:t.borderWidth,stroke:n.borderColor,fill:n.color,opacity:t.opacity},text:{strokeWidth:0,stroke:"none",fill:"none",align:"left",font:i({},t.font,n.font),"class":"dxm-legend-text"},metrics:{horizontalIndent:t.horizontalIndent,verticalIndent:t.verticalIndent,horizontalPadding:n.horizontalPadding,verticalPadding:n.verticalPadding,textIndent:n.textIndent,itemSize:n.itemSize,itemSpacing:n.itemSpacing,maxWidth:n.maxWidth,maxHeight:n.maxHeight}})},getLegendItemSettings:function(e){var t=e.color;return t===n&&e.paletteIndex>=0&&(t=this._palette.getColor(e.paletteIndex)),{strokeWidth:0,stroke:"none",fill:t}}});e.viz.map._tests.ThemeManager=o,e.viz.map.Map.include({_themeManagerType:o})}(DevExpress,jQuery),DevExpress.MOD_VIZ_VECTORMAP=!0};